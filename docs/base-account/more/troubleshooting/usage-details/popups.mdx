---
title: "Подсказки по всплывающим окнам"
---


## Обзор
Когда подключён Base Account и Coinbase Wallet SDK получает запрос, он открывает
[keys.coinbase.com](https://keys.coinbase.com/) во всплывающем окне и передаёт запрос туда для обработки. 
Учитывайте следующие моменты при работе со всплывающим окном Base Account.

## Поведение блокировки по умолчанию
- Большинство современных браузеров блокирует все всплывающие окна по умолчанию, если они не вызваны кликом.
- Если всплывающее окно заблокировано, браузер показывает уведомление пользователю, позволяя ему управлять настройками всплывающих окон.

### Что с этим делать
- Убедитесь, что между кликом по кнопке и запросом на открытие всплывающего окна Base Account нет дополнительной логики,
так как браузеры могут воспринимать запрос как программно инициированный.
- Если логику нельзя избежать, делайте её минимальной и тщательно тестируйте во всех поддерживаемых браузерах.

## `Cross-Origin-Opener-Policy` 
Если всплывающее окно Base Account открывается и отображает ошибку или бесконечный спиннер, это может быть связано с `Cross-Origin-Opener-Policy` вашего приложения. Убедитесь, что используется директива, позволяющая всплывающему окну Base Account функционировать.

- ✅ Позволяет всплывающему окну Base Account работать
  - `unsafe-none` (по умолчанию)
  - `same-origin-allow-popups` (рекомендуется)
- ❌ Ломает всплывающее окно Base Account
  - `same-origin`

Для получения более подробной информации обратитесь к [документации MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy).


## Поведение "задержки" всплывающего окна Base Account
- Иногда dapp может программно выполнить последующий запрос на основе ответа на предыдущий запрос.
Обычно браузеры блокируют такие программные запросы на открытие всплывающих окон.
- Чтобы решить эту проблему, после ответа на запрос всплывающее окно Base Account задерживается на 200мс, чтобы прослушивать входящие запросы перед закрытием.
  - Если запрос получен в течение этого 200мс окна, он будет принят и обработан в том же всплывающем окне.
  - Если запрос получен после 200мс окна и всплывающее окно закрылось, открытие всплывающего окна Base Account будет заблокировано браузером.
