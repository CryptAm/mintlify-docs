---
title: "pay"
description: "Отправлять платежи USDC в сети Base"
---

Определено в [Base Account SDK](https://github.com/base/account-sdk)

<Info>
Функция `pay` - это основной метод Base Pay, который позволяет вашим пользователям отправлять USDC (цифровые доллары) в сети Base. Не требуется знаний о криптовалюте - мы обрабатываем всю сложность. **Никаких комиссий для мерчантов или пользователей.**

**Попробуйте:** Протестируйте функцию `pay` интерактивно в нашем [Base Pay SDK Playground](https://base.github.io/account-sdk/pay-playground).
</Info>

## Параметры

<ParamField body="amount" type="string" required>
Сумма USDC для отправки (например, "10.50" или "0.01").
</ParamField>

<ParamField body="to" type="string" required>
Адрес Ethereum для отправки USDC (должен начинаться с 0x).

**Формат:** `^0x[0-9a-fA-F]{40}$`
</ParamField>

<ParamField body="testnet" type="boolean">
Установите true для использования тестовой сети Base Sepolia вместо основной сети. По умолчанию: false
</ParamField>

<ParamField body="payerInfo" type="object">
Опциональная конфигурация информации о плательщике для обратных вызовов данных.

<Expandable title="Свойства PayerInfo">
<ParamField body="requests" type="array" required>
Массив запросов информации от плательщика.

<Expandable title="Свойства InfoRequest">
<ParamField body="type" type="string" required>
Тип запрашиваемой информации.

**Возможные значения::** `'email' | 'physicalAddress' | 'phoneNumber' | 'name' | 'onchainAddress'`
</ParamField>

<ParamField body="optional" type="boolean">
Является ли эта информация опциональной. По умолчанию: false
</ParamField>
</Expandable>
</ParamField>

<ParamField body="callbackURL" type="string">
Опциональный URL обратного вызова для серверной валидации.
</ParamField>
</Expandable>
</ParamField>

## Возвращает

<ResponseField name="result" type="PayResult">
Результат платежа при успехе. Функция генерирует ошибку при неудаче.

<Expandable title="Свойства Payment Success">
<ResponseField name="id" type="string">
Хэш транзакции - используйте его для проверки статуса платежа.
</ResponseField>

<ResponseField name="amount" type="string">
Сумма, которая была отправлена.
</ResponseField>

<ResponseField name="to" type="string">
Адрес, который получил платеж.
</ResponseField>

<ResponseField name="payerInfoResponses" type="object">
Опциональные ответы на запросы информации.
</ResponseField>
</Expandable>
</ResponseField>

## Ошибки

Функция `pay` генерирует ошибку при неудаче платежа. Объект ошибки содержит сообщение, объясняющее, что пошло не так.


<RequestExample>
```typescript Basic Payment
import { pay } from '@base-org/account';

try {
  const payment = await pay({
    amount: "10.50",
    to: "0x1234567890123456789012345678901234567890",
    testnet: false
  });
  console.log(`Payment sent! Transaction ID: ${payment.id}`);
} catch (error) {
  console.error(`Payment failed: ${error.message}`);
}
```

```typescript Payment with Data Collection
try {
  const payment = await pay({
    amount: "25.00",
    to: "0x1234567890123456789012345678901234567890",
    payerInfo: {
      requests: [
        { type: 'email', optional: false },
        { type: 'phoneNumber', optional: true },
        { type: 'physicalAddress', optional: true }
      ],
      callbackURL: "https://your-api.com/validate"
    }
  });
  
  console.log(`Payment sent! Transaction ID: ${payment.id}`);
  
  // Доступ к собранной информации о пользователе
  if (payment.payerInfoResponses) {
    console.log('Email:', payment.payerInfoResponses.email);
    
    if (payment.payerInfoResponses.phoneNumber) {
      console.log('Phone:', payment.payerInfoResponses.phoneNumber.number);
      console.log('Country:', payment.payerInfoResponses.phoneNumber.country);
    }
    
    if (payment.payerInfoResponses.physicalAddress) {
      const address = payment.payerInfoResponses.physicalAddress;
      console.log('Address:', address.address1);
      console.log('City:', address.city);
      console.log('State:', address.state);
      console.log('Postal Code:', address.postalCode);
      console.log('Recipient Name:', `${address.name.firstName} ${address.name.familyName}`);
    }
  }
} catch (error) {
  console.error(`Payment failed: ${error.message}`);
}
```
</RequestExample>

<ResponseExample>
```typescript Basic Success Response
{
  id: "0xabcd1234...",
  amount: "10.50",
  to: "0x1234567890123456789012345678901234567890"
}
```

```typescript Success Response with Data Collection
{
  id: "0xabcd1234...",
  amount: "25.00",
  to: "0x1234567890123456789012345678901234567890",
  payerInfoResponses: {
    email: "user@example.com",
    phoneNumber: {
      number: "+1234567890",
      country: "US"
    },
    physicalAddress: {
      address1: "123 Main St",
      city: "San Francisco",
      state: "CA",
      postalCode: "94105",
      country: "US",
      name: {
        firstName: "John",
        familyName: "Doe"
      }
    }
  }
}
```

```typescript Error (thrown)
{
  "code": 4001,
  "message": "Request rejected",
  "stack": "Error: Request rejected\n    at getEthProviderError..."
}
```
</ResponseExample>

## Обработка ошибок

Функция `pay` генерирует ошибки вместо возврата результата. Всегда оборачивайте вызовы `pay` в блок try-catch для корректной обработки ошибок:

```typescript
try {
  const payment = await pay({
    amount: "10.00",
    to: "0xRecipient"
  });
  // Платеж успешен, используйте payment.id для отслеживания
  console.log(`Payment sent! Transaction ID: ${payment.id}`);
} catch (error) {
  // Платеж завершился неудачей
  console.error(`Payment failed: ${error.message}`);
}
```

import PolicyBanner from "/snippets/PolicyBanner.mdx";

<PolicyBanner />
