---
title: "BasePayButton"
description: "Готовый React-компонент для приёма платежей с использованием Base Account"
---

`BasePayButton` - это готовый к использованию React-компонент, который предоставляет бесшовный опыт оплаты с использованием Base Account. Он обрабатывает весь поток платежей, включая взаимодействие с пользователем, обработку транзакций и обработку результатов.

<Warning>
**Пожалуйста, следуйте руководству по Бренду** 

Если вы планируете использовать BasePayButton, пожалуйста, следуйте [руководству по Бренду](/base-account/reference/ui-elements/brand-guidelines) чтобы обеспечить единообразие в вашем приложении.
</Warning>

## Установка

<CodeGroup>
```bash npm
npm install @base-org/account-ui
```

```bash pnpm
pnpm add @base-org/account-ui
```

```bash yarn
yarn add @base-org/account-ui
```

```bash bun
bun add @base-org/account-ui
```
</CodeGroup>

## Базовое использование

```tsx
import { BasePayButton } from '@base-org/account-ui/react';

function PaymentForm() {
  const handlePaymentResult = (result) => {
    if (result.success) {
      console.log('Payment successful!', result);
    } else {
      console.error('Payment failed:', result.error);
    }
  };

  return (
    <BasePayButton 
      paymentOptions={{
        amount: '10.00',
        to: 'your-wallet.eth',
        testnet: true
      }}
      colorScheme="light"
      onPaymentResult={handlePaymentResult}
    />
  );
}
```

## Пропсы

### paymentOptions (обязательный)

Объект конфигурации платежа со следующими свойствами:

<ParamField body="amount" type="string" required>
Сумма платежа в USDC (например, "10.50" для $10.50)
</ParamField>

<ParamField body="to" type="string" required>
Адрес кошелька получателя или ENS-имя
</ParamField>

<ParamField body="testnet" type="boolean">
Использовать ли тестовую сеть для платежа (по умолчанию: false)
</ParamField>

<ParamField body="payerInfo" type="object">
Объект, содержащий запросы на сбор информации во время платежа
</ParamField>

### Свойства компонента (Props) для стилизации

<ParamField body="colorScheme" type="'light' | 'dark' | 'system'">
Цветовая схема для внешнего вида кнопки (по умолчанию: 'system')
</ParamField>

<ParamField body="size" type="'small' | 'medium' | 'large'">
Размер кнопки (по умолчанию: 'medium')
</ParamField>

<ParamField body="variant" type="'solid' | 'outline'">
Стиль варианта кнопки (по умолчанию: 'solid')
</ParamField>

<ParamField body="disabled" type="boolean">
Отключена ли кнопка (по умолчанию: false)
</ParamField>

### Обработчики событий

<ParamField body="onPaymentResult" type="function">
Функция обратного вызова, вызываемая при завершении платежа (успех или неудача)
</ParamField>

<ParamField body="onClick" type="function">
Пользовательский обработчик клика (вызывается перед обработкой платежа)
</ParamField>

## Опции платежа

### Базовый платёж

```tsx
const paymentOptions = {
  amount: '25.00',
  to: '0x742d35Cc6634C0532925a3b844Bc9e7595f6E456',
  testnet: true
};

<BasePayButton 
  paymentOptions={paymentOptions}
  colorScheme="light"
  onPaymentResult={handleResult}
/>
```

### Платёж со сбором информации о пользователе

```tsx
const paymentOptions = {
  amount: '49.99',
  to: 'store.eth',
  payerInfo: {
    requests: [
      { type: 'email', optional: false },
      { type: 'name', optional: true },
      { type: 'physicalAddress', optional: false }
    ],
    callbackURL: 'https://api.example.com/validate' // Опционально
  }
};

<BasePayButton 
  paymentOptions={paymentOptions}
  onPaymentResult={(result) => {
    if (result.success) {
      console.log('Payment successful!');
      console.log('User info:', result.payerInfoResponses);
    }
  }}
/>
```

## Опции стилизации

### Цветовые схемы

```tsx
{/* Светлая тема */}
<BasePayButton 
  paymentOptions={paymentOptions}
  colorScheme="light"
/>

{/* Тёмная тема */}
<BasePayButton 
  paymentOptions={paymentOptions}
  colorScheme="dark"
/>

{/* Системная тема (следует предпочтениям системы пользователя) */}
<BasePayButton 
  paymentOptions={paymentOptions}
  colorScheme="system"
/>
```

### Размеры и варианты

```tsx
{/* Разные размеры */}
<BasePayButton size="small" paymentOptions={paymentOptions} />
<BasePayButton size="medium" paymentOptions={paymentOptions} />
<BasePayButton size="large" paymentOptions={paymentOptions} />

{/* Разные размеры */}
<BasePayButton variant="solid" paymentOptions={paymentOptions} />
<BasePayButton variant="outline" paymentOptions={paymentOptions} />
```

## Обработка событий

### Обработка результата платежа

```tsx
const handlePaymentResult = (result) => {
  if (result.success) {
    // Платёж выполнен успешно
    console.log('Transaction hash:', result.transactionHash);
    console.log('Block number:', result.blockNumber);
    
    // Обработать информацию о пользователе, если она собрана
    if (result.userInfo) {
      console.log('User email:', result.userInfo.email);
      console.log('User name:', result.userInfo.name);
    }
    
    // Обновить UI, перенаправить и т.д.
    showSuccessMessage();
    redirectToThankYouPage();
  } else {
    // Платёж не удался
    console.error('Payment error:', result.error);
    
    // Обработать разные типы ошибок
    if (result.error.includes('insufficient funds')) {
      showInsufficientFundsMessage();
    } else if (result.error.includes('user rejected')) {
      showUserCancelledMessage();
    } else {
      showGenericErrorMessage();
    }
  }
};
```

### Пользовательский обработчик клика

```tsx
const handleClick = () => {
  // Пользовательская логика перед платежом
  console.log('User clicked pay button');
  
  // Отслеживание аналитики
  trackEvent('payment_button_clicked', {
    amount: '10.00',
    product: 'subscription'
  });
  
  // Валидация
  if (!isValidPayment()) {
    alert('Please complete the form first');
    return false; // Предотвратить платёж
  }
  
  return true; // Продолжить с платежом
};

<BasePayButton 
  paymentOptions={paymentOptions}
  onClick={handleClick}
  onPaymentResult={handlePaymentResult}
/>
```

## Полный пример

```tsx
import React, { useState } from 'react';
import { BasePayButton } from '@base-org/account-ui/react';

export default function CheckoutPage() {
  const [loading, setLoading] = useState(false);
  const [paymentStatus, setPaymentStatus] = useState(null);

  const paymentOptions = {
    amount: '29.99',
    to: 'merchant.eth',
    testnet: true,
    payerInfo: {
      requests: [
        { type: 'email', optional: false },
        { type: 'name', optional: true },
        { type: 'physicalAddress', optional: false }
      ]
    }
  };

  const handlePaymentResult = (result) => {
    setLoading(false);
    
    if (result.success) {
      setPaymentStatus({
        type: 'success',
        message: 'Payment successful!',
        transactionHash: result.transactionHash,
        userInfo: result.userInfo
      });
      
      // Отправить подтверждающее письмо
      if (result.userInfo?.email) {
        sendConfirmationEmail(result.userInfo.email, result.transactionHash);
      }
    } else {
      setPaymentStatus({
        type: 'error',
        message: `Payment failed: ${result.error}`
      });
    }
  };

  const handleClick = () => {
    setLoading(true);
    setPaymentStatus(null);
  };

  return (
    <div className="checkout-page">
      <h2>Complete Your Purchase</h2>
      <div className="product-info">
        <h3>Premium Subscription</h3>
        <p>$29.99/month</p>
      </div>
      
      <BasePayButton 
        paymentOptions={paymentOptions}
        colorScheme="light"
        size="large"
        disabled={loading}
        onClick={handleClick}
        onPaymentResult={handlePaymentResult}
      />
      
      {loading && (
        <div className="loading">
          Processing payment...
        </div>
      )}
      
      {paymentStatus && (
        <div className={`status ${paymentStatus.type}`}>
          <p>{paymentStatus.message}</p>
          {paymentStatus.transactionHash && (
            <p>Transaction: {paymentStatus.transactionHash}</p>
          )}
          {paymentStatus.userInfo && (
            <div>
              <p>Email: {paymentStatus.userInfo.email}</p>
              {paymentStatus.userInfo.name && (
                <p>Name: {paymentStatus.userInfo.name.firstName} {paymentStatus.userInfo.name.lastName}</p>
              )}
            </div>
          )}
        </div>
      )}
      
      <style jsx>{`
        .checkout-page {
          max-width: 400px;
          margin: 0 auto;
          padding: 20px;
        }
        
        .product-info {
          background: #f5f5f5;
          padding: 20px;
          border-radius: 8px;
          margin-bottom: 20px;
        }
        
        .loading {
          text-align: center;
          margin-top: 15px;
          color: #666;
        }
        
        .status {
          margin-top: 20px;
          padding: 15px;
          border-radius: 8px;
        }
        
        .status.success {
          background: #d4edda;
          border: 1px solid #c3e6cb;
          color: #155724;
        }
        
        .status.error {
          background: #f8d7da;
          border: 1px solid #f5c6cb;
          color: #721c24;
        }
      `}</style>
    </div>
  );
}
```

## Поддержка TypeScript

Компонент полностью типизирован при использовании TypeScript:

```tsx
import { BasePayButton, PaymentOptions, PaymentResult } from '@base-org/account-ui/react';

interface CheckoutProps {
  amount: string;
  recipient: string;
}

function Checkout({ amount, recipient }: CheckoutProps) {
  const paymentOptions: PaymentOptions = {
    amount,
    to: recipient,
    testnet: true
  };

  const handleResult = (result: PaymentResult) => {
    // TypeScript обеспечивает полную типовую безопасность
    if (result.success) {
      console.log(result.transactionHash); // ✅ Типобезопасно
    }
  };

  return (
    <BasePayButton 
      paymentOptions={paymentOptions}
      onPaymentResult={handleResult}
    />
  );
}
```

## Тестирование

Для тестирования вашей интеграции:

1. **Используйте тестовый режим**: Установите testnet: true в опциях платежа
2. **Получите тестовый USDC**: Используйте [кран Circle](https://faucet.circle.com) на Base Sepolia
3. **Протестируйте разные сценарии**: Попробуйте успешные платежи, отмены и ошибки
4. **Проверьте сбор информации о пользователе**: Протестируйте с разными конфигурациями payerInfo

BasePayButton предоставляет готовое к продакшену решение для платежей, которое обрабатывает всю сложность криптоплатежей, предоставляя при этом привычный пользовательский опыт.
