---
title: "SignInWithBaseButton"
description: "Готовый React-компонент для аутентификации пользователей с помощью Base Account"
---

`SignInWithBaseButton` - это готовый к использованию React-компонент, который предоставляет бесшовный опыт аутентификации с использованием Base Account. Он обрабатывает весь процесс входа, включая подключение кошелька, подписание сообщений и аутентификацию пользователя.

<Warning>
**Пожалуйста, следуйте руководству по Бренду** 

Если вы планируете использовать SignInWithBaseButton, пожалуйста, следуйте [руководству по Бренду](/base-account/reference/ui-elements/brand-guidelines) чтобы обеспечить единообразие в вашем приложении.
</Warning>

## Установка

<CodeGroup>
```bash npm
npm install @base-org/account-ui
```

```bash pnpm
pnpm add @base-org/account-ui
```

```bash yarn
yarn add @base-org/account-ui
```

```bash bun
bun add @base-org/account-ui
```
</CodeGroup>

## Базовое использование

```tsx
import { SignInWithBaseButton } from '@base-org/account-ui/react';

function LoginForm() {
  const handleSignIn = () => {
    console.log('User clicked sign in');
    // Пользовательская логика входа здесь
  };

  return (
    <SignInWithBaseButton 
      align="center"
      variant="solid"
      colorScheme="light"
      onClick={handleSignIn}
    />
  );
}
```

## Props

### Стилистические props

<ParamField body="align" type="'left' | 'center' | 'right'">
Выравнивание кнопки внутри контейнера (по умолчанию: 'left')
</ParamField>

<ParamField body="variant" type="'solid' | 'transparent'">
Стиль варианта кнопки (по умолчанию: 'solid')
</ParamField>

<ParamField body="colorScheme" type="'light' | 'dark' | 'system'">
Цветовая схема для внешнего вида кнопки (по умолчанию: 'system')
</ParamField>

<ParamField body="size" type="'small' | 'medium' | 'large'">
Размер кнопки (по умолчанию: 'medium')
</ParamField>

<ParamField body="disabled" type="boolean">
Отключена ли кнопка (по умолчанию: false)
</ParamField>

### Обработчики событий

<ParamField body="onClick" type="function">
Функция обратного вызова, вызываемая при нажатии кнопки
</ParamField>

<ParamField body="onSignInResult" type="function">
Функция обратного вызова, вызываемая при завершении аутентификации (успех или неудача)
</ParamField>

## Опции стилизации

### Выравнивание

```tsx
{/* Выравнивание по левому краю */}
<SignInWithBaseButton align="left" onClick={handleSignIn} />

{/* Выравнивание по центру */}
<SignInWithBaseButton align="center" onClick={handleSignIn} />

{/* Выравнивание по правому краю */}
<SignInWithBaseButton align="right" onClick={handleSignIn} />
```

### Варианты

```tsx
{/* Сплошной вариант (по умолчанию) */}
<SignInWithBaseButton variant="solid" onClick={handleSignIn} />

{/* Прозрачный вариант */}
<SignInWithBaseButton variant="transparent" onClick={handleSignIn} />
```

### Цветовые схемы

```tsx
{/* Светлая тема */}
<SignInWithBaseButton colorScheme="light" onClick={handleSignIn} />

{/* Тёмная тема */}
<SignInWithBaseButton colorScheme="dark" onClick={handleSignIn} />

{/* Системная тема (следует предпочтениям системы пользователя) */}
<SignInWithBaseButton colorScheme="system" onClick={handleSignIn} />
```

### Размеры

```tsx
{/* Разные размеры */}
<SignInWithBaseButton size="small" onClick={handleSignIn} />
<SignInWithBaseButton size="medium" onClick={handleSignIn} />
<SignInWithBaseButton size="large" onClick={handleSignIn} />
```

## Интеграция потока аутентификации

### Полный пример аутентификации

```tsx
import React, { useState } from 'react';
import { SignInWithBaseButton } from '@base-org/account-ui/react';
import { createBaseAccountSDK, getCryptoKeyAccount } from '@base-org/account';
import { createWalletClient, custom } from 'viem';
import { base } from 'viem/chains';

export default function AuthenticationDemo() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const sdk = createBaseAccountSDK({
    appName: 'Authentication Demo',
    appLogoUrl: 'https://example.com/logo.png',
    appChainIds: [base.id],
  });

  const handleSignIn = async () => {
    setLoading(true);
    setError(null);

    try {
      // Получить провайдер и создать клиент кошелька
      const provider = sdk.getProvider();
      const client = createWalletClient({
        chain: base,
        transport: custom(provider)
      });

      // Получить адрес аккаунта
      const [account] = await client.getAddresses();

      // Подписать сообщение для аутентификации
      const message = `Sign in to MyApp at ${Date.now()}`;
      const signature = await client.signMessage({ 
        account,
        message,
      });

      // Проверить подпись на бэкенде (опционально)
      const authResult = await verifySignature(account, message, signature);

      if (authResult.success) {
        setUser({
          address: account,
          signature: signature,
          timestamp: Date.now()
        });
        console.log('User authenticated successfully');
      } else {
        throw new Error('Authentication verification failed');
      }
    } catch (err) {
      console.error('Authentication failed:', err);
      setError(err.message || 'Authentication failed');
    } finally {
      setLoading(false);
    }
  };

  const handleSignOut = () => {
    setUser(null);
    setError(null);
  };

  // Моковая проверка на бэкенде (замените на свой API)
  const verifySignature = async (address, message, signature) => {
    // Отправить на ваш бэкенд для проверки
    const response = await fetch('/api/verify-signature', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ address, message, signature })
    });
    return response.json();
  };

  if (user) {
    return (
      <div className="authenticated">
        <h3>Welcome!</h3>
        <p><strong>Address:</strong> {user.address}</p>
        <p><strong>Signed in at:</strong> {new Date(user.timestamp).toLocaleString()}</p>
        <button onClick={handleSignOut} className="sign-out-btn">
          Sign Out
        </button>
      </div>
    );
  }

  return (
    <div className="authentication">
      <h2>Sign In to Continue</h2>
      <p>Connect your Base Account to access the application</p>
      
      <SignInWithBaseButton 
        align="center"
        variant="solid"
        colorScheme="light"
        size="large"
        disabled={loading}
        onClick={handleSignIn}
      />
      
      {loading && (
        <div className="loading">
          Authenticating...
        </div>
      )}
      
      {error && (
        <div className="error">
          <p>Authentication failed: {error}</p>
          <button onClick={() => setError(null)}>Try Again</button>
        </div>
      )}
      
      <style jsx>{`
        .authentication {
          max-width: 400px;
          margin: 0 auto;
          padding: 40px 20px;
          text-align: center;
        }
        
        .authenticated {
          max-width: 400px;
          margin: 0 auto;
          padding: 20px;
          background: #f8f9fa;
          border-radius: 12px;
        }
        
        .loading {
          margin-top: 20px;
          color: #666;
          font-style: italic;
        }
        
        .error {
          margin-top: 20px;
          padding: 15px;
          background: #f8d7da;
          border: 1px solid #f5c6cb;
          border-radius: 8px;
          color: #721c24;
        }
        
        .sign-out-btn {
          background: #6c757d;
          color: white;
          border: none;
          padding: 10px 20px;
          border-radius: 6px;
          cursor: pointer;
          margin-top: 15px;
        }
        
        .sign-out-btn:hover {
          background: #5a6268;
        }
      `}</style>
    </div>
  );
}
```

### Интеграция с SIWE

```tsx
import { createSiweMessage } from 'siwe';

const handleSignInWithSIWE = async () => {
  try {
    const provider = sdk.getProvider();
    const client = createWalletClient({
      chain: base,
      transport: custom(provider)
    });

    const [account] = await client.getAddresses();

    // Создать сообщение SIWE
    const siweMessage = createSiweMessage({
      address: account,
      chainId: base.id,
      domain: window.location.host,
      nonce: Math.random().toString(36).substring(7),
      uri: window.location.origin,
      version: '1',
      statement: 'Sign in to MyApp with your Base Account'
    });

    // Подписать сообщение SIWE
    const signature = await client.signMessage({ 
      account,
      message: siweMessage.prepareMessage(),
    });

    // Проверить на бэкенде
    const authResult = await fetch('/api/siwe-verify', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        message: siweMessage,
        signature: signature
      })
    });

    if (authResult.ok) {
      const userData = await authResult.json();
      setUser(userData);
    }
  } catch (error) {
    console.error('SIWE authentication failed:', error);
  }
};

<SignInWithBaseButton 
  align="center"
  variant="solid"
  colorScheme="light"
  onClick={handleSignInWithSIWE}
/>
```

## Пользовательские состояния кнопки

### Состояние загрузки

```tsx
function CustomSignInButton() {
  const [isLoading, setIsLoading] = useState(false);

  const handleSignIn = async () => {
    setIsLoading(true);
    try {
      // Логика аутентификации
      await authenticateUser();
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <SignInWithBaseButton 
      disabled={isLoading}
      onClick={handleSignIn}
      colorScheme="light"
    />
  );
}
```

### Обработка состояния ошибки

```tsx
function SignInWithErrorHandling() {
  const [error, setError] = useState(null);

  const handleSignIn = async () => {
    try {
      setError(null);
      await authenticateUser();
    } catch (err) {
      if (err.code === 4001) {
        setError('User rejected the authentication request');
      } else if (err.code === -32002) {
        setError('Authentication request already pending');
      } else {
        setError('Authentication failed. Please try again.');
      }
    }
  };

  return (
    <div>
      <SignInWithBaseButton 
        onClick={handleSignIn}
        colorScheme="light"
      />
      {error && (
        <div className="error-message">
          {error}
        </div>
      )}
    </div>
  );
}
```

## Интеграция с провайдерами аутентификации

### Интеграция с NextAuth.js

Ниже приведён пример настройки NextAuth для использования Base Account в качестве провайдера учётных данных, чтобы вы могли использовать Base Account в вашем Next.js приложении.

<Note>
**Интеграция NextAuth.js**

[Next.js](https://nextjs.org/) - популярный React-фреймворк, а [NextAuth.js](https://next-auth.js.org/) - библиотека аутентификации для Next.js. Она предлагает управление сессиями и провайдеров.
</Note>

```tsx pages/api/auth/[...nextauth].js expandable

import NextAuth from 'next-auth'
import CredentialsProvider from 'next-auth/providers/credentials'
import { verifyMessage } from 'viem'

export default NextAuth({
  providers: [
    CredentialsProvider({
      name: 'Base Account',
      credentials: {
        address: { label: 'Address', type: 'text' },
        message: { label: 'Message', type: 'text' },
        signature: { label: 'Signature', type: 'text' },
      },
      async authorize(credentials) {
        try {
          const isValid = await verifyMessage({
            address: credentials.address,
            message: credentials.message,
            signature: credentials.signature,
          });

          if (isValid) {
            return {
              id: credentials.address,
              name: credentials.address,
              email: null,
            };
          }
          return null;
        } catch (error) {
          return null;
        }
      },
    }),
  ],
});
```
```tsx page.tsx expandable
// Фронтенд-компонент
import { signIn } from 'next-auth/react';

const handleSignIn = async () => {
  // ... получить подпись как ранее
  
  const result = await signIn('credentials', {
    address: account,
    message: message,
    signature: signature,
    redirect: false,
  });

  if (result?.ok) {
    console.log('Signed in successfully');
  }
};
```

## Поддержка TypeScript

```tsx
import { SignInWithBaseButton } from '@base-org/account-ui/react';

interface AuthButtonProps {
  onAuthSuccess: (userAddress: string) => void;
  onAuthError: (error: string) => void;
}

function AuthButton({ onAuthSuccess, onAuthError }: AuthButtonProps) {
  const handleSignIn = async () => {
    try {
      // Логика аутентификации
      const userAddress = await authenticateUser();
      onAuthSuccess(userAddress);
    } catch (error) {
      onAuthError(error.message);
    }
  };

  return (
    <SignInWithBaseButton 
      align="center"
      variant="solid"
      colorScheme="light"
      onClick={handleSignIn}
    />
  );
}
```

## Лучшие практики

1. **Обработка состояний загрузки**: Отключайте кнопку во время аутентификации, чтобы предотвратить множественные попытки

2. **Обработка ошибок**: Предоставляйте понятные сообщения об ошибках для разных сценариев сбоя

3. **Безопасность**: Всегда проверяйте подписи на вашем бэкенде перед доверием аутентификации

4. **Пользовательский опыт**: Показывайте понятную обратную связь во время процесса аутентификации

5. **Доступность**: Кнопка включает соответствующие ARIA-лейблы и навигацию с клавиатуры

6. **Тестирование**: Тестируйте с разными состояниями кошелька (подключён, отключён и т.д.)

SignInWithBaseButton предоставляет готовое к продакшену решение для аутентификации, которое обрабатывает всю сложность аутентификации на основе кошелька, предоставляя при этом привычный пользовательский опыт.
