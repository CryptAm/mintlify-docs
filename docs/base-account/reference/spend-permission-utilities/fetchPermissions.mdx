---
title: "fetchPermissions"
description: "Получить доступные разрешения на расходование для аккаунта и цепочки, с опциональной фильтрацией по получателю"
---

Определено в [Base Account SDK](https://github.com/base/account-sdk)

<Info>
  Возвращает разрешения для Base Account пользователя в указанной цепочке. Если указан `spender`, возвращает только разрешения для этого получателя. В противном случае возвращает все разрешения для аккаунта.
</Info>

## Параметры

<ParamField body="account" type="address" required>
  Адрес Base Account пользователя для запроса.
</ParamField>

<ParamField body="chainId" type="number" required>
  Идентификатор целевой цепочки (chain ID).
</ParamField>

<ParamField body="spender" type="address">
  Опционально. Адрес получателя, который будет использоваться для расходования. Если не указан, возвращаются все разрешения для аккаунта.
</ParamField>

<ParamField body="provider" type="EIP1193Provider">
  Опционально. Экземпляр провайдера Ethereum, совместимый со стандартом EIP-1193. Получите его с помощью `sdk.getProvider()`. Если не указан, используется провайдер SDK по умолчанию.
</ParamField>

## Возвращает

<ResponseField name="permissions" type="SpendPermission[]">
 Массив разрешений на расходование, соответствующих запросу.

<Expandable title="Свойства SpendPermission">
<ResponseField name="permissionHash" type="string">
Детерминированный хеш EIP-712 разрешения.
</ResponseField>

<ResponseField name="signature" type="string">
  Подпись для полезной нагрузки EIP-712.
</ResponseField>

<ResponseField name="chainId" type="number">
  Идентификатор целевой цепочки (chain ID).
</ResponseField>

<ResponseField name="permission" type="object">
Базовые поля разрешения.

<Expandable title="Поля permission">
<ResponseField name="account" type="address" />
<ResponseField name="spender" type="address" />
<ResponseField name="token" type="address" />
<ResponseField name="allowance" type="bigint" />
<ResponseField name="period" type="number">Длительность в секундах.</ResponseField>
<ResponseField name="start" type="number">Временная метка Unix (секунды).</ResponseField>
<ResponseField name="end" type="number">Временная метка Unix (секунды).</ResponseField>
<ResponseField name="salt" type="string" />
<ResponseField name="extraData" type="string" />
</Expandable>
</ResponseField>
</Expandable>
</ResponseField>

<RequestExample>
```typescript Fetch permissions for specific spender
import { fetchPermissions } from "@base-org/account/spend-permission";
import { createBaseAccountSDK } from "@base-org/account";

const sdk = createBaseAccountSDK({
  appName: 'My App',
  appLogoUrl: 'https://example.com/logo.png',
  appChainIds: [84532],
});

// Получить разрешения для конкретного получателя
const permissions = await fetchPermissions({
  account: "0xUserBaseAccountAddress",
  chainId: 84532,
  spender: "0xAppSpenderAddress",
  provider: sdk.getProvider(),
});

// Получить все разрешения для аккаунта (без указания получателя)
const allPermissions = await fetchPermissions({
  account: "0xUserBaseAccountAddress",
  chainId: 84532,
});
```
</RequestExample>

## Обработка ошибок

Всегда заключайте вызов в блок `try-catch` для корректной обработки возможных ошибок.

import PolicyBanner from "/snippets/PolicyBanner.mdx";

<PolicyBanner />
