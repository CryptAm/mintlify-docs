---
title: "wallet_addSubAccount"
description: "Добавить суб-аккаунт в кошелек"
---

Экспериментальный RPC метод для создания суб-аккаунтов

<Info>
Создает новый суб-аккаунт, связанный с основным аккаунтом кошелька. Суб-аккаунты позволяют осуществлять иерархическое управление аккаунтами и делегирование прав.
</Info>

## Параметры

<ParamField body="account" type="object" required>
Объект конфигурации аккаунта.

<Expandable title="Свойства объекта аккаунта">
<ParamField body="type" type="string" required>
Тип создаваемого суб-аккаунта. Может быть "create" или "deployed".
</ParamField>

<ParamField body="keys" type="array">
Массив объектов ключей для суб-аккаунта (требуется для типа "create").

<Expandable title="Key object properties">
<ParamField body="type" type="string" required>
Тип ключа: "address", "p256", "webcrypto-p256" или "webauthn-p256".
</ParamField>

<ParamField body="publicKey" type="string" required>
Публичный ключ в виде шестнадцатеричной строки (hex).
</ParamField>
</Expandable>
</ParamField>

<ParamField body="address" type="string">
Адрес развернутого аккаунта для добавления в качестве суб-аккаунта (требуется для типа "deployed").
</ParamField>

<ParamField body="chainId" type="number">
Идентификатор цепи (chainID), на которой развернут аккаунт (требуется для типа "deployed").
</ParamField>
</Expandable>
</ParamField>

## Возвращает

<ResponseField name="result" type="object">
Информация о суб-аккаунте, включая адрес и детали развертывания.

<Expandable title="Свойства результата">
<ResponseField name="address" type="string">
Адрес созданного суб-аккаунта.
</ResponseField>

<ResponseField name="factory" type="string">
Адрес фабричного контракта (опционально).
</ResponseField>

<ResponseField name="factoryData" type="string">
Данные развертывания фабрики (опционально).
</ResponseField>
</Expandable>
</ResponseField>

<RequestExample>
```json Create Request
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "wallet_addSubAccount",
  "params": [{
    "account": {
      "type": "create",
      "keys": [{
        "type": "p256",
        "publicKey": "0x0123456789abcdef..."
      }]
    }
  }]
}
```

```json Deployed Request
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "wallet_addSubAccount",
  "params": [{
    "account": {
      "type": "deployed",
      "address": "0x1234567890123456789012345678901234567890",
      "chainId": 8453
    }
  }]
}
```
</RequestExample>

<ResponseExample>
```json Success Response
{
  "id": 1,
  "jsonrpc": "2.0",
  "result": {
    "address": "0x1234567890123456789012345678901234567890",
    "chainId": "0x2105"
  }
}
```
</ResponseExample>

## Обработка ошибок

| Код  | Сообщение                      | Описание    |
| ---- | ------------------------------ | ----------- |
| 4001 | User rejected the request      | Пользователь отклонил создание суб-аккаунта |
| 4100 | Requested method not supported | Метод не поддерживается кошельком |
| -32602 | Invalid params                 | Некорректная конфигурация аккаунта |

<Warning>
Это экспериментальная функция, и API может измениться в будущих версиях.
</Warning>
