---
title: "eth_feeHistory"
description: "Получить историческую информацию о комиссиях за газ для диапазона блоков"
---

Определено в [EIP-1559](https://eips.ethereum.org/EIPS/eip-1559)

<Info>
Возвращает набор исторических данных о газе, на основе которых можно пересчитать затраты на газ и спрогнозировать будущие цены.
</Info>

## Параметры

<ParamField body="blockCount" type="string" required>
Количество блоков в запрашиваемом диапазоне, в виде строки в шестнадцатеричном формате.
</ParamField>

<ParamField body="newestBlock" type="string" required>
Наибольший номер блока в запрашиваемом диапазоне (шестнадцатеричный) или "latest".
</ParamField>

<ParamField body="rewardPercentiles" type="array" required>
Массив значений процентилей для выборки из фактических приоритетных комиссий каждого блока.
</ParamField>

## Возвращает

<ResponseField name="result" type="object">
Объект данных истории комиссий, содержащий информацию о газе.

<Expandable title="Свойства объекта истории комиссий">
<ResponseField name="oldestBlock" type="string">
Наименьший номер блока в диапазоне (шестнадцатеричная строка).
</ResponseField>

<ResponseField name="baseFeePerGas" type="array">
Массив базовых комиссий за газ для каждого блока (строки в шестнадцатеричном формате).
</ResponseField>

<ResponseField name="gasUsedRatio" type="array">
Массив коэффициентов использования газа для каждого блока (числа от 0 до 1).
</ResponseField>

<ResponseField name="reward" type="array">
Массив точек данных фактической приоритетной комиссии за газ для каждого блока (опционально).
</ResponseField>
</Expandable>
</ResponseField>

<RequestExample>
```json Request
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "eth_feeHistory",
  "params": ["0x5", "latest", [20, 70]]
}
```
</RequestExample>

<ResponseExample>
```json Success Response
{
  "id": 1,
  "jsonrpc": "2.0",
  "result": {
    "oldestBlock": "0x1",
    "baseFeePerGas": [
      "0x3b9aca00",
      "0x3ba1f3e2",
      "0x3a6db1e6"
    ],
    "gasUsedRatio": [
      0.5265,
      0.4858,
      0.6124
    ],
    "reward": [
      [
        "0x3b9aca00",
        "0x3b9aca00"
      ],
      [
        "0x3ba1f3e2",
        "0x3b9aca00"
      ],
      [
        "0x3a6db1e6",
        "0x3b9aca00"
      ]
    ]
  }
}
```
</ResponseExample>

## Обработка ошибок

| Код    | Сообщение                      | Описание    |
| ------ | ------------------------------ | ----------- |
| -32602 | Invalid params                 | Некорректное количество блоков, номер блока или значения процентилей |
| 4100   | Requested method not supported | Метод не поддерживается кошельком |

<Info>
Этот метод полезен для реализации алгоритмов динамической оценки комиссий и анализа паттернов загруженности сети.
</Info>
