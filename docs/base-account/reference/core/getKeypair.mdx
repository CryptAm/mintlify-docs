---
title: "getKeypair"
description: "Получить существующую пару ключей P256 из хранилища"
---

Определено в [Base Account SDK](https://github.com/base/account-sdk)

<Info>
Извлекает существующую пару ключей P256, если она была ранее сгенерирована и сохранена. Это полезно для проверки существования ключей перед генерацией новых.
</Info>

## Параметры

Эта функция не принимает параметров.

## Возвращает

<ResponseField name="result" type="P256KeyPair | null">
Сохраненная пара ключей P256 или `null`, если пара ключей не существует.

<Expandable title="Свойства P256KeyPair">
<ResponseField name="publicKey" type="string">
Публичный ключ сохраненной пары в шестнадцатеричном формате (hex).
</ResponseField>

<ResponseField name="privateKey" type="string">
Приватный ключ сохраненной пары. Обращаться с крайней осторожностью.
</ResponseField>
</Expandable>
</ResponseField>

<RequestExample>
```typescript Basic Usage
import { getKeypair } from '@base-org/account';

const existingKeyPair = await getKeypair();
if (existingKeyPair) {
  console.log('Found existing key pair');
} else {
  console.log('No existing key pair found');
}
```

```typescript Get or Create Pattern
import { getKeypair, generateKeyPair } from '@base-org/account';

let keyPair = await getKeypair();
if (!keyPair) {
  keyPair = await generateKeyPair();
}
```
</RequestExample>

<ResponseExample>
```typescript Success Response (Key Pair Found)
{
  publicKey: "0x04a1b2c3d4e5f6...",
  privateKey: "0x1a2b3c4d5e6f7a..."
}
```

```typescript Success Response (No Key Pair)
null
```
</ResponseExample>

<Warning>
**Private Key Access**

Извлеченные приватные ключи следует обрабатывать с такими же соображениями безопасности, как и вновь сгенерированные ключи.
</Warning>

## Паттерн "Получить или создать"

Распространенный паттерн - проверять существующие ключи перед генерацией новых:

```typescript
import { getKeypair, generateKeyPair } from '@base-org/account';

async function getOrCreateKeyPair() {
  // Сначала попытаться получить существующую пару ключей
  let keyPair = await getKeypair();
  
  if (!keyPair) {
    // Сгенерировать новую пару ключей, если не существует
    console.log('No existing key pair, generating new one...');
    keyPair = await generateKeyPair();
  } else {
    console.log('Using existing key pair');
  }
  
  return keyPair;
}
```



## Поведение хранилища

Функция `getKeypair` извлекает ключи из:

- Безопасного хранилища браузера (для веб-приложений)
- Платформенно-специфичного безопасного хранилища (для нативных приложений)
- Кэша памяти (для текущей сессии)

<Info>
Пары ключей хранятся безопасно и доступны только в том же источнике (origin) и контексте приложения.
</Info>

## Обработка ошибок

Функция `getKeypair` может генерировать ошибки для:

- Сбоев доступа к хранилищу
- Проблем с повреждением данных
- Проблем совместимости браузера

Всегда оборачивайте вызовы `getKeypair` в блок try-catch:

```typescript
try {
  const keyPair = await getKeypair();
  if (keyPair) {
    // Использовать существующие ключи
  } else {
    // Ключи не найдены, возможно, нужно сгенерировать новые
  }
} catch (error) {
  console.error('Error accessing key storage:', error);
  // Обработать ошибки доступа к хранилищу
}
```

## Управление жизненным циклом ключей

```typescript
class KeyManager {
  private keyPair: P256KeyPair | null = null;
  
  async initialize() {
    try {
      // Загрузить существующие ключи
      this.keyPair = await getKeypair();
      
      if (this.keyPair) {
        console.log('Loaded existing key pair');
      } else {
        console.log('No stored keys found');
      }
      
      return !!this.keyPair;
    } catch (error) {
      console.error('Failed to initialize key manager:', error);
      return false;
    }
  }
  
  hasKeys(): boolean {
    return !!this.keyPair;
  }
  
  async ensureKeys(): Promise<P256KeyPair> {
    if (!this.keyPair) {
      console.log('Generating new key pair...');
      this.keyPair = await generateKeyPair();
    }
    return this.keyPair;
  }
  
  getPublicKey(): string | null {
    return this.keyPair?.publicKey || null;
  }
}
```

## Соображения безопасности

<Warning>
**Доступ к приватным ключам**

Извлеченные приватные ключи следует обрабатывать с такими же соображениями безопасности, как и вновь сгенерированные ключи.
</Warning>

- Всегда проверяйте целостность ключей перед использованием
- Внедрите соответствующий контроль доступа
- Рассмотрите возможность периодической повторной генерации ключей для повышения безопасности

import PolicyBanner from "/snippets/PolicyBanner.mdx";

<PolicyBanner />
