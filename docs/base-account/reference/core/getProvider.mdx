---
title: "getProvider"
description: "Получить экземпляр провайдера Ethereum из Base Account SDK"
---

Метод `getProvider()` возвращает экземпляр провайдера Ethereum, соответствующий стандартам [EIP-1193](https://eips.ethereum.org/EIPS/eip-1193). Этот провайдер может использоваться с популярными web3 библиотеками, такими как Viem, Wagmi и Web3.js.

## Использование

```tsx
import { createBaseAccountSDK, base } from '@base-org/account';

const sdk = createBaseAccountSDK({
  appName: 'My App Name',
  appLogoUrl: 'https://example.com/logo.png',
  appChainIds: [base.constants.CHAIN_IDS.base],
});

const provider = sdk.getProvider();
```

## Возвращает

EIP-1193 совместимый провайдер Ethereum, который поддерживает:
- Стандартные RPC методы (eth_requestAccounts, eth_sendTransaction, wallet_sendCalls и т.д.)
- Пользовательские методы кошелька (coinbase_fetchPermissions)
- Подписку на события (accountsChanged, chainChanged и т.д.)

Полный список поддерживаемых методов смотрите в [разделе Провайдер](/base-account/reference/core/provider-rpc-methods/request-overview)

## Примеры интеграции

### С Viem

```tsx
import { createWalletClient, custom } from 'viem';
import { base } from 'viem/chains';

const provider = sdk.getProvider();

const client = createWalletClient({
  chain: base,
  transport: custom(provider)
});

// Использовать клиент
const [account] = await client.getAddresses();
const hash = await client.sendTransaction({
  account,
  to: '0x...',
  value: parseEther('0.1')
});
```

### С Wagmi

```tsx
import { createConfig, custom } from 'wagmi';
import { base } from 'wagmi/chains';

const provider = sdk.getProvider();

const config = createConfig({
  chains: [base],
  transports: {
    [base.id]: custom(provider),
  },
});
```

### Прямое использование провайдера

```tsx
// Запросить аккаунты
const accounts = await provider.request({ 
  method: 'eth_requestAccounts' 
});

// Отправить транзакцию
const txHash = await provider.request({
  method: 'eth_sendTransaction',
  params: [{
    from: accounts[0],
    to: '0x...',
    value: '0x38d7ea4c68000', // 0.001 ETH в wei
  }]
});

// Отправить пакетные транзакции
const result = await provider.request({
  method: 'wallet_sendCalls',
  params: [{
    version: '2.0.0',
    from: accounts[0],
    chainId: '0x2105', // Base mainnet
    atomicRequired: true,
    calls: [
      {
        to: '0x...',
        value: '0x0',
        data: '0x...'
      }
    ]
  }]
});
```

## Обработка событий

Провайдер генерирует стандартные EIP-1193 события:

```tsx
// Слушать изменения аккаунтов
provider.on('accountsChanged', (accounts) => {
  console.log('Accounts changed:', accounts);
});

// Слушать изменения цепи
provider.on('chainChanged', (chainId) => {
  console.log('Chain changed:', chainId);
});

// Слушать события подключения
provider.on('connect', (connectInfo) => {
  console.log('Connected:', connectInfo);
});

// Слушать отключение
provider.on('disconnect', (error) => {
  console.log('Disconnected:', error);
});
```

## Обработка ошибок

Корректно обрабатывайте ошибки провайдера:Handle provider errors gracefully:

```tsx
try {
  const accounts = await provider.request({ 
    method: 'eth_requestAccounts' 
  });
} catch (error) {
  if (error.code === 4001) {
    console.log('User rejected the request');
  } else if (error.code === -32602) {
    console.log('Invalid parameters');
  } else {
    console.error('Unexpected error:', error);
  }
}
```

## Конфигурация провайдера

Поведение провайдера настраивается через инициализацию SDK:

```tsx
const sdk = createBaseAccountSDK({
  appName: 'My App Name',
  appLogoUrl: 'https://example.com/logo.png',
  appChainIds: [base.constants.CHAIN_IDS.base],
  // Дополнительная конфигурация влияет на поведение провайдера
  subAccounts: {
    toOwnerAccount: async () => ({ account: cryptoAccount?.account })
  }
});
```

## Поддержка TypeScript

Провайдер полностью типизирован при использовании TypeScript:

```tsx
import type { EIP1193Provider } from '@base-org/account';

const provider: EIP1193Provider = sdk.getProvider();

// TypeScript предоставит полную поддержку IntelliSense для поддерживаемых методов
```

Метод `getProvider()` является основным способом взаимодействия с Base Account из вашего приложения, предоставляя стандартный интерфейс, который бесшовно работает с экосистемой web3.
