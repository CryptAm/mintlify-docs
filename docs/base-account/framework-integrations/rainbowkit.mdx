---
title: "RainbowKit"
description: "Интеграция Base Account с RainbowKit"
---

import { GithubRepoCard } from "/snippets/GithubRepoCard.mdx";

## Обзор

[RainbowKit](https://www.rainbowkit.com/) - это React-библиотека, которая упрощает добавление входа через кошельки в ваше ончейн-приложение. Она разработана для работы "из коробки" и включает нативную поддержку Base Account.

Интегрируя RainbowKit с Base Account, вы можете предоставить пользователям бесшовный опыт подключения, сохраняя доступ ко всему набору функций Base Account.

### Что вы получите

К концу этого руководства вы сможете:

* Настроить RainbowKit с поддержкой Base Account
* Узнать, как использовать компоненты `ConnectButton` и `WalletButton`
* Настроить приложение для приоритетного использования Base Account как основного варианта кошелька
* Получить и настроить Reown Project ID (требуется для проектов с RainbowKit)

Вы можете сразу перейти к использованию шаблона Base Account RainbowKit, чтобы начать работу:

<GithubRepoCard title="Шаблон Base Account RainbowKit" githubUrl="https://github.com/base/demos/tree/master/base-account/base-account-rainbow-template" />

## Установка

После [создания нового проекта Next.js](https://nextjs.org/docs/app/getting-started/installation), установите необходимые зависимости:

<CodeGroup>
  ```bash npm
  npm install @rainbow-me/rainbowkit wagmi viem @tanstack/react-query
  ```

  ```bash pnpm
  pnpm add @rainbow-me/rainbowkit wagmi viem @tanstack/react-query
  ```

  ```bash yarn
  yarn add @rainbow-me/rainbowkit wagmi viem @tanstack/react-query
  ```

  ```bash bun
  bun add @rainbow-me/rainbowkit wagmi viem @tanstack/react-query
  ```
</CodeGroup>

<Tip>
**Получите доступ к последней версии Base Account SDK (Рекомендуется)**

It is {<u>НАСТОЯТЕЛЬНО РЕКОМЕНДУЕТСЯ</u>} получить доступ к последней версии Base Account SDK, чтобы получить последние функции и исправления ошибок.

Для этого вы можете использовать следующую команду для переопределения версии:

<CodeGroup>
```bash npm
npm pkg set overrides.@base-org/account="latest"
# ИЛИ добавьте вручную в package.json:
# "overrides": { "@base-org/account": "latest" }
```

```bash pnpm
# pnpm требует ручного добавления в package.json:
# "pnpm": { "overrides": { "@base-org/account": "latest" } }
```

```bash yarn
#yarn использует resolutions - добавьте вручную в package.json:
# "resolutions": { "@base-org/account": "latest" }
```

```bash bun
# bun поддерживает overrides - добавьте вручную в package.json:
# "overrides": { "@base-org/account": "latest" }
```

</CodeGroup>

Или вы можете использовать конкретную версию, добавив ее в `overrides`:

<CodeGroup>
```bash npm
npm pkg set overrides.@base-org/account="2.2.0"
# ИЛИ добавьте вручную в package.json:
# "overrides": { "@base-org/account": "2.2.0" }
```

```bash pnpm
# pnpm требует ручного добавления в package.json:
# "pnpm": { "overrides": { "@base-org/account": "2.2.0" } }
```

```bash yarn
# yarn использует resolutions - добавьте вручную в package.json:
# "resolutions": { "@base-org/account": "2.2.0" }
```

```bash bun
# bun поддерживает overrides - добавьте вручную в package.json:
# "overrides": { "@base-org/account": "2.2.0" }
```

</CodeGroup>

Убедитесь, что удалили папку `node_modules` и файл `package-lock.json`, а затем выполните новую установку, чтобы переопределения применились.

</Tip>

## Получите ваш Reown Project ID

Прежде чем использовать RainbowKit с Base Account, вам необходимо получить Project ID из Reown Cloud.

1. Перейдите в [Reown Cloud Dashboard](https://dashboard.reown.com/)
2. Зарегистрируйте бесплатный аккаунт или войдите, если он уже есть
3. Создайте новый проект и скопируйте Project ID.

## Конфигурация

### 1. Настройте Wagmi с RainbowKit

Создайте файл `wagmi.ts` в вашей директории `src`, чтобы настроить подключения к блокчейну и варианты кошельков:

```tsx src/wagmi.ts
import { getDefaultConfig } from '@rainbow-me/rainbowkit';
import {
  base,
  mainnet
} from 'wagmi/chains';

export const config = getDefaultConfig({
  appName: 'My Base Account App',
  projectId: 'YOUR_PROJECT_ID', // Замените на ваш Reown Project ID
  chains: [
    mainnet,
    base
  ],
  ssr: true, // Включите поддержку серверного рендеринга
});
```

<Warning>
  **Замените YOUR_PROJECT_ID**

  Убедитесь, что заменили 'YOUR_PROJECT_ID' на фактический Project ID, полученный из [Reown Cloud](https://dashboard.reown.com/).

  Для продакшен-приложений используйте переменные окружения:

  ```typescript
  projectId: process.env.NEXT_PUBLIC_REOWN_PROJECT_ID!,
  ```

  И добавьте в ваш `.env.local`:

  ```bash
  NEXT_PUBLIC_REOWN_PROJECT_ID=your_project_id_here
  ```
</Warning>

### 2. Настройте провайдер RainbowKit

Оберните ваше приложение необходимыми провайдерами в вашем `_app.tsx`:

```tsx src/pages/_app.tsx
import '../styles/global.css';
import '@rainbow-me/rainbowkit/styles.css';
import type { AppProps } from 'next/app';

import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { WagmiProvider } from 'wagmi';
import { RainbowKitProvider } from '@rainbow-me/rainbowkit';

import { config } from '../wagmi';

const queryClient = new QueryClient();

function MyApp({ Component, pageProps }: AppProps) {
  return (
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}>
        <RainbowKitProvider>
          <Component {...pageProps} />
        </RainbowKitProvider>
      </QueryClientProvider>
    </WagmiProvider>
  );
}

export default MyApp;
```

## Использование

RainbowKit предоставляет два основных компонента для подключения кошельков: `ConnectButton` и `WalletButton`. Оба компонента поддерживают Base Account "из коробки".

### Вариант 1: Использование ConnectButton

`ConnectButton` - это универсальный компонент RainbowKit для подключения кошельков. Он отображает модальное окно подключения кошелька со всеми доступными кошельками, включая Base Account.

```tsx src/pages/index.tsx
import { ConnectButton } from '@rainbow-me/rainbowkit';
import type { NextPage } from 'next';

const Home: NextPage = () => {
  return (
    <div
      style={{
        display: 'flex',
        justifyContent: 'flex-end',
        padding: 12,
      }}
    >
      <ConnectButton />
    </div>
  );
};

export default Home;
```

При реализации это будет выглядеть так:
<div style={{ display: 'flex', justifyContent: 'center'}}>
  <img src="/images/base-account/RainbowKitWalletWindow.png" alt="RainbowKit Wallet Window" style={{ width: '600px', height: 'auto' }} />
</div>

### Вариант 2: Использование WalletButton для Base Account

Компонент `WalletButton` предоставляет прямое подключение к конкретному кошельку. Это идеально, когда вы хотите выделить Base Account в качестве основного варианта кошелька.

```tsx src/pages/index.tsx
import { WalletButton } from '@rainbow-me/rainbowkit';
import type { NextPage } from 'next';

const Home: NextPage = () => {
  return (
    <div
      style={{
        display: 'flex',
        justifyContent: 'flex-end',
        padding: 12,
      }}
    >
      <WalletButton wallet="baseAccount" />
    </div>
  );
};

export default Home;
```

При реализации это будет выглядеть так:
<div style={{ display: 'flex', justifyContent: 'center'}}>
  <img src="/images/base-account/BaseAccountButton.png" alt="Base Account Button" style={{ width: '200px', height: 'auto' }} />
</div>

## Расширенная конфигурация

### Приоритезация Base Account в списке кошельков

Чтобы Base Account отображался первым в модальном окне подключения кошелька, вы можете настроить порядок кошельков:

```tsx src/wagmi.ts
import { getDefaultConfig } from '@rainbow-me/rainbowkit';
import { base, mainnet, sepolia } from 'wagmi/chains';

export const config = getDefaultConfig({
  appName: 'My Base Account App',
  projectId: process.env.NEXT_PUBLIC_REOWN_PROJECT_ID!,
  chains: [base, mainnet, sepolia],
  ssr: true,
  // Конфигурация кошельков
  wallets: [
    {
      groupName: 'Recommended',
      wallets: ['baseAccount'], // Base Account отображается первым
    },
  ],
});
```

### Настройка темы RainbowKit

RainbowKit поддерживает расширенные возможности темизации:

```tsx src/pages/_app.tsx
import { RainbowKitProvider, darkTheme } from '@rainbow-me/rainbowkit';

function MyApp({ Component, pageProps }: AppProps) {
  return (
    <WagmiProvider config={config}>
      <QueryClientProvider client={queryClient}>
        <RainbowKitProvider
          theme={darkTheme({
            accentColor: '#0052FF', // Синий цвет Base
            accentColorForeground: 'white',
            borderRadius: 'medium',
          })}
        >
          <Component {...pageProps} />
        </RainbowKitProvider>
      </QueryClientProvider>
    </WagmiProvider>
  );
}
```

### Доступ к состоянию подключения кошелька

Используйте хуки wagmi для доступа к состоянию подключения кошелька во всем вашем приложении:

```tsx
import { useAccount, useDisconnect, useEnsName } from 'wagmi';

function Profile() {
  const { address, isConnected } = useAccount();
  const { disconnect } = useDisconnect();
  const { data: ensName } = useEnsName({ address });

  if (!isConnected) return <div>Not connected</div>;

  return (
    <div>
      <p>Connected to {ensName ?? address}</p>
      <button onClick={() => disconnect()}>Disconnect</button>
    </div>
  );
}
```

### Программное переключение сетей

Позвольте пользователям переключаться между разными сетями:

```tsx
import { useSwitchChain } from 'wagmi';
import { base, mainnet } from 'wagmi/chains';

function NetworkSwitcher() {
  const { switchChain } = useSwitchChain();

  return (
    <div>
      <button onClick={() => switchChain({ chainId: base.id })}>
        Switch to Base
      </button>
      <button onClick={() => switchChain({ chainId: mainnet.id })}>
        Switch to Mainnet
      </button>
    </div>
  );
}
```

## Рекомендации

<Card title="Используйте переменные окружения" icon="shield-check">
  Храните чувствительную конфигурацию, такую как ваш Reown Project ID, в переменных окружения, а не в коде:

  ```bash .env.local
  NEXT_PUBLIC_REOWN_PROJECT_ID=your_project_id_here
  ```
</Card>

<Card title="Включите поддержку SSR" icon="server">
  Всегда устанавливайте `ssr: true` в конфигурации wagmi для приложений Next.js, чтобы избежать проблем с гидратацией:

  ```typescript
  export const config = getDefaultConfig({
    // ...
    ssr: true,
  });
  ```
</Card>

<Card title="Сделайте Base приоритетной сетью" icon="link">
  Укажите Base первой сетью в вашей конфигурации, чтобы сделать ее сетью по умолчанию:

  ```typescript
  chains: [base, mainnet, ...otherChains]
  ```
</Card>

<Card title="Обновляйте зависимости" icon="arrow-up">
  Регулярно обновляйте RainbowKit, wagmi и viem, чтобы получать последние функции Base Account и исправления безопасности:

  ```bash
  npm update @rainbow-me/rainbowkit wagmi viem
  ```
</Card>

## Следующие шаги

Теперь, когда у вас настроен RainbowKit с Base Account, вы можете:

<CardGroup cols={2}>
  <Card title="Изучите возможности Base Account" icon="code" href="https://docs.base.org/base-account">
    Узнайте больше о Base Account и его функциях
  </Card>
  <Card title="Изучите документацию RainbowKit" icon="code" href="https://www.rainbowkit.com/docs/introduction">
    Узнайте больше о RainbowKit и его функциях
  </Card>
  
  <Card title="Изучите документацию Wagmi" icon="hook" href="https://wagmi.sh/react/hooks">
    Узнайте больше о wagmi и его функциях
  </Card>
  <Card title="Присоединитесь к сообществу Base" icon="code" href="https://discord.com/invite/buildonbase">
    Присоединитесь к сообществу Base и получайте помощь от других разработчиков
  </Card>
</CardGroup>
