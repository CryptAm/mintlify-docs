---
title: "Настройка"
description: "Настройте Privy с Base Account для вашего React-приложения"
---

import { GithubRepoCard } from "/snippets/GithubRepoCard.mdx";

Узнайте, как настроить Privy с Base Account для включения бесшовной аутентификации пользователей и управления кошельками.

## Обзор

[Privy](https://www.privy.io/) предоставляет решения для аутентификации пользователей и управления кошельками в ончейн-приложениях. 
Интегрируя Privy с Base Account, вы 
получаете доступ ко всем хукам и методам Privy, 
а также к пользователям Base Account.

### Что вы получите

К концу этого руководства вы:

- Настроите Privy с поддержкой Base Account
- Установите Base Account как основной вариант аутентификации
- Сможете получить доступ к Base Account SDK из React SDK Privy

Вы можете сразу перейти к использованию [шаблону Base Account Privy](https://github.com/base/base-account-privy) чтобы начать работу.

<GithubRepoCard
  title="Шаблон Base Account Privy"
  githubUrl="https://github.com/base/base-account-privy"
/>

## Установка

### 1. Создайте новый проект Next.js
<CodeGroup>
```bash npm
npx create-next-app@latest base-account-privy
cd base-account-privy
```

```bash yarn
yarn create next-app base-account-privy
cd base-account-privy
```
</CodeGroup>

### 2. Переопределите версию Base Account SDK

Чтобы получить доступ к последней версии Base Account SDK, вам нужно переопределить версию, зафиксированную Privy, в вашем файле package.json.

Для этого вы можете использовать следующую команду:

<CodeGroup>
```bash npm
npm pkg set overrides.@base-org/account="latest"
# ИЛИ добавьте вручную в package.json:
# "overrides": { "@base-org/account": "latest" }
```

```bash pnpm
# pnpm требует ручного добавления в package.json:
# "pnpm": { "overrides": { "@base-org/account": "latest" } }
```

```bash yarn
# yarn использует resolutions - добавьте вручную в package.json:
# "resolutions": { "@base-org/account": "latest" }
```

```bash bun
# bun поддерживает overrides - добавьте вручную в package.json:
# "overrides": { "@base-org/account": "latest" }
```

</CodeGroup>

Или вы можете использовать конкретную версию, добавив ее в `overrides`:

<CodeGroup>
```bash npm
npm pkg set overrides.@base-org/account="2.2.0"
# ИЛИ добавьте вручную в package.json:
# "overrides": { "@base-org/account": "2.2.0" }
```

```bash pnpm
# pnpm требует ручного добавления в package.json:
# "pnpm": { "overrides": { "@base-org/account": "2.2.0" } }
```

```bash yarn
# yarn использует resolutions - добавьте вручную в package.json:
# "resolutions": { "@base-org/account": "2.2.0" }
```

```bash bun
# bun поддерживает overrides - добавьте вручную в package.json:
# "overrides": { "@base-org/account": "2.2.0" }
```

</CodeGroup>

<Tip>
**Если вы не начинаете новый проект**

Убедитесь, что удалили папку `node_modules` и файл `package-lock.json`, а затем выполните новую установку, чтобы переопределения применились.
</Tip>

### 3. Установите зависимости

Установите зависимости с помощью вашего предпочтительного менеджера пакетов:

<CodeGroup>
```bash npm
npm install @privy-io/react-auth @privy-io/chains @privy-io/wagmi-connector wagmi viem @base-org/account-ui react-toastify
```

```bash pnpm
pnpm add @privy-io/react-auth @privy-io/chains @privy-io/wagmi-connector wagmi viem @base-org/account-ui react-toastify
```

```bash yarn
yarn add @privy-io/react-auth @privy-io/chains @privy-io/wagmi-connector wagmi viem @base-org/account-ui react-toastify
```

```bash bun
bun add @privy-io/react-auth @privy-io/chains @privy-io/wagmi-connector wagmi viem @base-org/account-ui react-toastify
```

</CodeGroup>

## Конфигурация

### 1. Настройте переменные окружения

Создайте файл `.env.local` в корне вашего проекта:

```bash
NEXT_PUBLIC_PRIVY_APP_ID=your_privy_app_id
```

Получите ваш Privy App ID в [панеле управлений Privy](https://dashboard.privy.io/).

### 2. Настройте провайдер Privy

Создайте конфигурацию Privy с Base Account в качестве метода входа по умолчанию и обновите layout, чтобы включить `PrivyProvider`.

<CodeGroup>
```tsx Create Provider (app/providers.tsx) expandable
"use client";

import { PrivyProvider } from "@privy-io/react-auth";
import { base } from "@privy-io/chains";

export default function Providers({ children }: { children: React.ReactNode }) {
  return (
    <PrivyProvider
      appId={process.env.NEXT_PUBLIC_PRIVY_APP_ID!}
      config={{
        appearance: {
          walletList: ['base_account'],
          showWalletLoginFirst: true
        },
        defaultChain: base,
      }}
    >
      {children}
    </PrivyProvider>
  );
}
```
```tsx Add to Layout (app/layout.tsx) expandable
import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";
import Providers from "./providers";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

export const metadata: Metadata = {
  title: "Privy Next demo",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
      >
        <Providers>{children}</Providers>
      </body>
    </html>
  );
}
```
</CodeGroup>

## Использование

### 1. Обновите главную страницу приложения

Обновите файл `app/page.tsx`, чтобы показать процесс аутентификации:

```tsx app/page.tsx expandable
"use client";

import { usePrivy } from "@privy-io/react-auth";
import { ToastContainer } from "react-toastify";

function Home() {
  const { ready, authenticated, logout, login } = usePrivy();
  if (!ready) {
    return <div>Loading...</div>;
  }

  return (
    <div className="bg-white md:max-h-[100vh] md:overflow-hidden">
      {authenticated ? (
        <section className="w-full flex flex-col md:flex-row md:h-[calc(100vh-60px)]">
          <div className="flex-grow overflow-y-auto h-full p-4 pl-8">
            <button className="button" onClick={logout}>Logout</button>
          </div>
        </section>
      ) : (
        <section className="w-full flex flex-row justify-center items-center h-[calc(100vh-60px)] relative bg-gradient-to-b from-blue-600 to-blue-700">
          <div className="z-10 flex flex-col items-center justify-center w-full h-full px-4">
          <div className="flex h-10 items-center justify-center rounded-[20px] border border-white/20 bg-white/10 backdrop-blur-sm px-6 text-lg text-white font-abc-favorit">
            Base × Privy Demo
          </div>
        <div className="text-center mt-4 text-white text-7xl font-medium font-abc-favorit leading-[81.60px]">
          Build on Base
        </div>
            <div className="text-center text-white/90 text-xl font-normal leading-loose mt-8 max-w-2xl">
              Get started building on Base with Privy&apos;s authentication and native Base Account support
            </div>
            <button
              className="bg-white text-black mt-15 w-full max-w-md rounded-full px-4 py-2 font-medium hover:bg-gray-50 transition-colors lg:px-8 lg:py-4 lg:text-xl"
              onClick={() => {
                login();
                setTimeout(() => {
                  (document.querySelector('input[type="email"]') as HTMLInputElement)?.focus();
                }, 150);
              }}
            >
              Get started
            </button>
          </div>
        </section>
      )}
  
      <ToastContainer
        position="top-center"
        autoClose={5000}
        hideProgressBar
        newestOnTop={false}
        closeOnClick={false}
        rtl={false}
        pauseOnFocusLoss
        draggable={false}
        pauseOnHover
        limit={1}
        aria-label="Toast notifications"
        style={{ top: 58 }}
      />
    </div>
  );
}

export default Home;
```

### 2. Запустите проект локально

Готово! Теперь вы можете запустить проект локально:

<CodeGroup>
```bash npm
npm run dev
```
```bash pnpm
pnpm dev
```
```bash yarn
yarn dev
```
```bash bun
bun dev
```
</CodeGroup>

Вы должны увидеть страницу, которая выглядит следующим образом:

<div style={{ display: 'flex', justifyContent: 'center'}}>
  <img src="/images/base-account/Privy-Base-Account.png" alt="Base × Privy Demo" style={{ width: '600px', height: 'auto' }} />
</div>

### 3. Получите экземпляр Base Account SDK (Опционально)

Вы можете получить доступ к Base Account SDK из Privy с помощью хука `useBaseAccountSdk`.

```tsx Get the SDK instance
import { useBaseAccountSdk } from '@privy-io/react-auth';

const { baseAccountSdk } = useBaseAccountSdk();

const provider = baseAccountSdk.getProvider();

const addresses = await provider.request({method: 'wallet_connect'});

```


