---
title: Построение блоков
slug: /block-building
description: На этой странице описывается, как строятся блоки в Base.
---

## Обзор
В этом разделе описывается, как упорядочиваются блоки в сетях Base. Упорядочивание отделено от пользовательского опыта. Например, секвенсер может строить Flashblock'и каждые 200 мс, не раскрывая эти Flashblock'и публично. В этом сценарии порядок блоков изменится, но пользовательский опыт останется неизменным.

Сети Base в настоящее время настроены следующими способами:

| Сеть         | Текущая конфигурация        | Предстоящие развертывания  |
|--------------|-----------------------------|----------------------------|
| Base Mainnet | [Flashblocks](#flashblocks) + [Per-Transaction Gas Max](#per-transaction-gas-maximum) | |
| Base Sepolia | [Flashblocks](#flashblocks) + [Per-Transaction Gas Max](#per-transaction-gas-maximum) | |

## Конфигурации

### Flashblocks
В настоящее время блоки строятся с использованием [op-rbuilder](https://github.com/flashbots/op-rbuilder) и аукционы приоритетных комиссий происходят каждые 200 мс. Следует знать о двух изменениях по сравнению с ванильным упорядочиванием:

##### Время

Flashblock'и строятся каждые 200 мс, каждый из которых упорядочивает часть блока. В отличие от текущей системы, где более поздние транзакции с более высокими приоритетными комиссиями могут быть размещены в начале блока, Flashblock'и создают ограничение, основанное на времени. После того как Flashblock построен и распространен, порядок его транзакций фиксируется. Даже если транзакция с более высокой приоритетной комиссией поступит позже, она не может быть включена в более ранние, уже построенные Flashblock'и.

##### Высокие лимиты газа

Если ваше приложение создает транзакции с большими лимитами газа, мы рекомендуем отслеживать любые изменения в задержке включения. Транзакции с лимитом газа свыше 1/10 от текущего лимита газа блока (в настоящее время 14 миллионов газа), сталкиваются с дополнительными ограничениями:

* Каждый Flashblock может использовать только часть общего лимита газа блока
* Flashblock 1: до 1/10 от общего лимита
* Flashblock 2: до 2/10 от общего лимита

И так далее для последующих Flashblock'ов

Следовательно, транзакции с большими требованиями к газу должны ждать более поздние Flashblock'и с достаточной пропускной способностью по газу. Например, транзакция, превышающая 1/10 лимита газа блока, не может быть включена в Flashblock 1 и должна ждать Flashblock 2 или позже.

### Максимум газа на транзакцию

Base применяет максимальный лимит газа на транзакцию в размере **25 000 000 газа**. Транзакции, которые указывают лимит газа выше этого значения, **отклоняются мемпулом до включения.** `eth_sendTransaction` или `eth_sendRawTransaction` вернут ошибку JSON-RPC (например: `exceeds maximum per-transaction gas limit`). Это ограничение не меняет лимит газа блока или условия валидности блока.

[EIP 7825](https://eips.ethereum.org/EIPS/eip-7825) Фусаки **изменит** условия валидности блока и установит более низкий максимальный лимит газа на транзакцию в 16 777 216 газа (2^24). Мы ожидаем, что это изменение протокола будет принято во всех цепях OP Stack примерно в январе 2026 года.

Операторам бандлеров для кошельков смарт-контрактов необходимо настроить свои системы для ограничения размера бандла в соответствии с этим ограничением.

### Ванильное упорядочивание

Блоки строятся каждые 2 секунды с помощью [op-geth](https://github.com/ethereum-optimism/op-geth). Транзакции внутри этих блоков упорядочиваются по приоритетной комиссии, смотрите ([код](https://github.com/ethereum-optimism/op-geth/blob/optimism/miner/worker.go#L627)).

## Журнал изменений

* 17 сентября: Включен максимум газа на транзакцию в Base Mainnet
* 11 сентября: Завершено тестирование максимума газа на транзакцию в Base Mainnet
* 10 сентября: Начато тестирование максимума газа на транзакцию в Base Mainnet
* 3 сентября: Включен максимум газа на транзакцию в Base Sepolia
* 7 июля: Включены Flashblock'и в Base Mainnet
* 15 мая: Завершено тестирование Flashblock'ов в Base Mainnet
* 15 мая: Начато тестирование Flashblock'ов в Base Mainnet
* 25 февраля: Включены Flashblock'и в Base Sepolia
