---
title: Снепшоты узла
sidebarTitle: Снепшоты
---

Использование снепшота значительно сокращает начальное время, необходимое для синхронизации узла Base. Снепшоты регулярно обновляются.

<Warning>
Архивные узлы Geth больше не поддерживаются через снепшоты из-за ограничений производительности. Для архивной функциональности используйте Reth.
</Warning>

Если вы потенциальный или текущий оператор узла Base, вы можете восстановиться из снепшота, чтобы ускорить начальную синхронизацию. Внимательно следуйте приведенным ниже шагам.

## Восстановление из снепшота

Эти шаги предполагают, что вы находитесь в клонированной директории `node` (той, которая содержит `docker-compose.yml`).

1. **Подготовка директории данных**:
    - **Перед первым запуском Docker** создайте директорию данных на вашей хост-машине, которая будет сопоставлена с контейнером Docker. Эта директория должна соответствовать сопоставлению `volumes` в файле `docker-compose.yml` для клиента, который вы собираетесь использовать.
      - Для Reth (рекомендуется):  
        ```bash
        mkdir ./reth-data
        ```  
      - Для Geth:  
        ```bash
        mkdir ./geth-data
        ```  
    - Если вы ранее запускали узел и у вас есть существующая директория данных, **остановите узел** (`docker compose down`), удалите содержимое существующей директории (например, `rm -rf ./reth-data/*`) и продолжите.

2. **Загрузите снепшот**: Выберите подходящий снепшот для вашей сети и клиента из таблицы ниже. Используйте `wget` (или аналогичную утилиту) для его загрузки в директорию `node`.

    | Сеть     | Клиент | Тип снепшота  | Команда загрузки (`wget …`)                                                                                       |
    | -------- | ------ | ------------- | ----------------------------------------------------------------------------------------------------------------- |
    | Testnet  | Reth   | Архивный (рекомендуется) | `wget https://sepolia-reth-archive-snapshots.base.org/$(curl https://sepolia-reth-archive-snapshots.base.org/latest)` |
    | Testnet  | Reth   | Полный                   | Coming Soon                 |
    | Testnet  | Geth   | Полный                   | `wget https://sepolia-full-snapshots.base.org/$(curl https://sepolia-full-snapshots.base.org/latest)`                 |
    | Mainnet  | Reth   | Архивный (рекомендуется) | `wget https://mainnet-reth-archive-snapshots.base.org/$(curl https://mainnet-reth-archive-snapshots.base.org/latest)` |
    | Testnet  | Reth   | Полный                   | Coming Soon                 |
    | Mainnet  | Geth   | Полный                   | `wget https://mainnet-full-snapshots.base.org/$(curl https://mainnet-full-snapshots.base.org/latest)`                 |

    <Note>
    Убедитесь, что у вас достаточно свободного места на диске для загрузки архива снепшота (файл `.tar.gz`) _и_ извлечения его содержимого. Извлеченные данные будут значительно больше архива.
    </Note>

3. **Извлечение снепшота**: Распакуйте загруженный архив снепшота. Замените `<snapshot-filename.tar.gz>` на фактическое имя загруженного файла:

    ```bash
    tar -xzvf <snapshot-filename.tar.gz>
    ```

4. **Перемещение данных**: Процесс извлечения, вероятно, создаст директорию (например, `reth` или `geth`). 

    * Переместите содержимое этой директории в директорию данных, которую вы создали в Шаге 1.
        * Пример (если архив извлекся в папку reth - **проверьте фактическое имя папки**):

          ```bash
          # For Reth
          mv ./reth/* ./reth-data/
          rm -rf ./reth    # Очистка пустой извлеченной папки
          ```

        * Пример (если архив извлекся в папку geth):

          ```bash
          # For Geth
          mv ./geth/* ./geth-data/
          rm -rf ./geth    # Очистка пустой извлеченной папки
          ```

    * Цель состоит в том, чтобы каталоги данных цепочки (например, `chaindata`, `nodes`, `segments` и т.д.) находились непосредственно внутри `./reth-data` или `./geth-data`, а не были вложены в другую подпапку.

5. **Запуск узла**: Теперь, когда данные снепшота на месте, вернитесь в корень папки вашего узла Base и запустите узел:

    ```bash
    cd ..
    docker compose up --build
    ```

  Ваш узел должен начать синхронизацию с последнего блока в снепшоте.

6. **Проверка и очистка**: Следите за логами узла (`docker compose logs -f <имя_службы>`) или используйте команду [мониторинга синхронизации](/base-chain/node-operators/run-a-base-node#syncing) чтобы убедиться, что узел начинает синхронизацию с высоты блока снепшота. После подтверждения вы можете безопасно удалить загруженный архив снепшота (файл `.tar.gz`), чтобы освободить место на диске.
