---
title: Встраивания и предпросмотры
description: Превратите каждое действие пользователя в органический рост с помощью доступных для расшаривания встраиваний, работающих на метаданных, которые стимулируют вовлеченность и открытие.
---

> **Что вы узнаете**  
> К концу этого руководства вы сможете:
> - Понять, как встраивания и метаданные работают вместе для создания насыщенных социальных превью
> - Выбирать между статическими и динамическими встраиваниями для разных сценариев использования
> - Отлаживать и оптимизировать встраивания для максимальной производительности и вовлеченности

## Почему распространение важно

Распространение (Sharing) - один из самых быстрых и экономически эффективных способов увеличить пользовательскую базу вашего мини-приложения.

Когда пользователь делится вашим приложением в ленте (например, в приложении Base или Farcaster), платформа генерирует насыщенное встраивание - визуальное превью с вашим брендингом, изображениями и кнопкой призыва к действию, которое появляется прямо в социальных лентах.

Каждое распространение:

- **Увеличивает охват** — друзья и подписчики видят ваше приложение мгновенно
- **Стимулирует вовлеченность** — визуально привлекательные встраивания получают больше кликов, чем обычные ссылки
- **Улучшает рейтинг** — расшаренные приложения чаще появляются в списках лидеров категорий
- **Создает вирусные циклы** — отличный опыт побуждает пользователей делиться со своими сетями

## Метаданные и встраивания

### Как метаданные создают встраивания

Когда кто-то делится ссылкой на ваше мини-приложение, платформы вроде Base App показывают не просто обычный URL. Вместо этого они загружают **метаданные** с вашей страницы и используют их для генерации насыщенного **встраивания** - визуальной карточки-превью с вашим изображением, заголовком и кнопкой призыва к действию.

Метаданные действуют как инструкции, которые говорят платформе, как именно отображать ваше мини-приложение в лентах.

<Frame caption="Как метаданные превращаются во встраивания">
  <img src="/images/minikit/Diagram.png" alt="How embed data is rendered" />
</Frame>

**Полный процесс от метаданных к встраиванию:**

<Steps>
<Step title="Пользователь делится вашей ссылкой">
  Пользователь нажимает "поделиться" или вставляет URL вашего мини-приложения в социальную ленту (Base App, Farcaster).
</Step>

<Step title="Платформа загружает метаданные">
  Платформа делает запрос к вашему URL и читает теги `<meta>` в вашем HTML, чтобы понять, как отобразить ваше приложение.
</Step>

<Step title="Метаданные становятся встраиванием">
  Платформа преобразует ваши метаданные в насыщенное визуальное встраивание с изображением, заголовком, описанием и интерактивной кнопкой.
</Step>

<Step title="Встраивание появляется в ленте">
  Ваше мини-приложение появляется как привлекательная, кликабельная карточка, которую пользователи могут запустить прямо из своей ленты.
</Step>
</Steps>

### Структура метаданных

Ваши метаданные состоят из специальных HTML-метатегов, которые определяют каждую часть встраивания:

```html index.html
<meta name="fc:frame" content='{
  "version":"next",
  "imageUrl":"https://your-app.com/embed-image",
  "button":{
    "title":"Play Now",
    "action":{
      "type":"launch_frame",
      "name":"Your App Name",
      "url":"https://your-app.com"
    }
  }
}' />
```

Каждый элемент метаданных напрямую соответствует визуальному элементу во встраивании:

- `imageUrl` → Главное визуальное изображение, появляющееся во встраивании
- `button.title` → Текст на кнопке призыва к действию
- `action.name` → Название приложения, отображаемое во встраивании
- `action.url` → Куда пользователи попадают при клике на встраивание

### Внешний вид встраивания в лентах

<Frame caption="Встраивание мини-приложения в социальной ленте">
<img src="/images/minikit/feed_mini.jpg" alt="Mini app feed" className="h-[220px] w-auto"/>
</Frame>

### Метаданные манифеста vs. метаданные встраивания

Ваше мини-приложение использует два типа метаданных:

#### Файл манифеста

Назначение: Регистрация приложения и его обнаружение

Расположен по адресу `/.well-known/farcaster.json`, этот файл содержит основную информацию о вашем приложении для каталога Base App.

<Warning>
Мини-приложения требуют полного манифеста. Прочитайте [требования к манифесту](/mini-apps/features/manifest#example-manifest).
</Warning>

#### Метаданные встраивания

Назначение: Генерация встраиваний при расшаривании

Расположены в тегах `<head>` вашего HTML, эти метаданные создают насыщенные встраивания, когда пользователи делятся вашим приложением.

```html index.html
<meta name="fc:frame" content='{
  "version":"next",
  "imageUrl":"https://your-app.com/embed-image",
  "button":{
    "title":"Play Now",
    "action":{
      "type":"launch_frame",
      "name":"Your App Name",
      "url":"https://your-app.com"
    }
  }
}' />
```

Это контролирует, как ваши встраивания выглядят в социальных лентах.

### Лучшие практики для метаданных

- Оптимизация изображений: Используйте соотношение сторон 3:2
- Четкое ценностное предложение в кнопке и тексте
- Визуальная согласованность с UI продукта
- Быстрая загрузка для конечных точек метаданных
- Проверка на разных платформах перед запуском

## Расшаривание

### Добавление функции расшаривания

Предлагайте пользователям поделиться в ключевые моменты достижений, используя хук compose из MiniKit.

```ts ComposeCastButton.tsx
import { useComposeCast } from '@coinbase/onchainkit/minikit';

export default function ComposeCastButton() {
  const { composeCast } = useComposeCast();

  const handleCompose = () => {
    composeCast({
      text: 'Just minted an awesome NFT using @coinbase OnchainKit! ',
    });
  };

  const handleComposeWithEmbed = () => {
    composeCast({
      text: 'Check out this amazing Mini App!',
      embeds: ['https://your-mini-app-url.com'],
    });
  };

  return (
    <div>
      <button onClick={handleCompose}>Share Achievement</button>
      <button onClick={handleComposeWithEmbed}>Share Frame</button>
    </div>
  );
}
```

<Tip>
Стратегические моменты для расшаривания:

- После завершения викторины
- После минта NFT
- После прохождения испытания
- После достижения вехи
</Tip>

### Через пользовательский интерфейс Base App

Пользователи также могут делиться напрямую из детального просмотра вашего приложения в приложении Base с помощью встроенной функции расшаривания.

<Frame caption="Кнопка расшаривания в UI приложения Base">
  <img src="/images/minikit/share-button-ui.jpg" alt="Share button in Base app" className="h-[220px] w-auto"/>
</Frame>

## Типы встраиваний

### Статические встраивания

Используют одно неизменяемое изображение и текст для всех расшариваний. Лучше для согласованности и скорости.

### Динамические встраивания

Генерируют метаданные для каждого пользователя или события для персонализации и создания эффекта "страха упустить выгоду" (FOMO). Обеспечьте быстрый ответ (< 5с) и стратегию кэширования.

## Реализация

### С MiniKit (Next.js)

```ts layout.tsx
export async function generateMetadata(): Promise<Metadata> {
  const URL = process.env.NEXT_PUBLIC_URL;
  return {
    title: process.env.NEXT_PUBLIC_ONCHAINKIT_PROJECT_NAME,
    description: "Your Mini App description here",
    other: {
      "fc:frame": JSON.stringify({
        version: "next",
        imageUrl: process.env.NEXT_PUBLIC_APP_HERO_IMAGE,
        button: {
          title: `Launch ${process.env.NEXT_PUBLIC_ONCHAINKIT_PROJECT_NAME}`,
          action: {
            type: "launch_frame",
            name: process.env.NEXT_PUBLIC_ONCHAINKIT_PROJECT_NAME,
            url: URL,
            splashImageUrl: process.env.NEXT_PUBLIC_SPLASH_IMAGE,
            splashBackgroundColor: process.env.NEXT_PUBLIC_SPLASH_BACKGROUND_COLOR,
          },
        },
      }),
    },
  };
}
```

### Без MiniKit

```html index.html
<meta name="fc:frame" content='{"version":"next","imageUrl":"https://your-app.com/embed-image","button":{"title":"Play Now","action":{"type":"launch_frame","name":"Your App Name","url":"https://your-app.com"}}}' />
```

## Отладка

### Инструменты

<Card title="Инструмент предпросмотра Base Build" icon="bug" href="https://base.dev/preview">
  Проверьте, как ваше приложение будет выглядеть в приложении Base, валидируя ваш манифест, встраивания и привязку аккаунта
</Card>

### Распространенные проблемы

<AccordionGroup>
<Accordion title="Встраивание не показывается или некорректно">
Проверьте размеры изображения, наличие обязательного `fc:frame`, валидность JSON и доступность URL.
</Accordion>
<Accordion title="Встраивания не обновляются">
Проверьте заголовки кэша, перепостите для обновления, подождите ~10–15 минут для обновления кэшей.
</Accordion>
<Accordion title="Медленная генерация">
Оптимизируйте генерацию изображений, предварительно генерируйте, используйте serverless, сжимайте ассеты.
</Accordion>
</AccordionGroup>

<Warning>
Настройте `Cache-Control` осторожно: достаточно долго для производительности (300–600с), достаточно коротко для быстрых обновлений.
</Warning>

## Следующие шаги

<Steps>
<Step title="Выберите свою стратегию встраиваний" />
<Step title="Реализуйте генерацию метаданных" />
<Step title="Добавьте стратегические точки расшаривания" />
<Step title="Протестируйте и оптимизируйте" />
</Steps>

Продолжите с:

- [Поиск и обнаружение](/mini-apps/troubleshooting/how-search-works)
- [Манифест](/mini-apps/core-concepts/manifest)



