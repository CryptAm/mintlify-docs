---
title: Частые проблемы и отладка
description: Часто возникающие проблемы при разработке мини-приложений и их решения
---

## Предварительные требования и проверка настройки

Убедитесь, что у вашего мини-приложения есть базовые необходимые компоненты.

### Обязательные файлы и структура

```text
your-domain.com/
├── .well-known/
│   └── farcaster.json          # Обязательный файл манифеста
├── your-app/
│   ├── index.html              # Точка входа вашего приложения
│   └── ...                     # Файлы вашего приложения
```

### Контрольный список настройки окружения

- Домен доступен по HTTPS
- Файл манифеста существует по адресу `/.well-known/farcaster.json`
- Все URL изображений общедоступны

# Отладка
Используйте встроенный инструмент Preview в Base Build для базовой отладки.

<Card title="Инструмент Preview" img="/images/base-build/preview-tool-overview.png">
Начните отладку вашего приложения с помощью [инструмента Preview](https://base.dev/preview)
</Card>

**Инструмент Preview** поможет вам:

- Проверить манифест и метаданные вашего приложения
- Протестировать, как ваше приложение будет выглядеть в приложении Base
- Подтвердить владение и привязку аккаунта

Инструмент Preview предоставляет четкие визуальные подсказки:
- ✅ Зеленые галочки, когда все настроено правильно 
- ❌ Красные индикаторы, когда что-то требует вашего внимания

### Компоненты инструмента Preview

Инструмент Preview имеет три основных компонента:

- **Консоль**: Предпросмотр вашего приложения и просмотр логов для принятия обоснованных решений о производительности.
- **Привязка аккаунта (Account Association)**: Подтвердите, что ваше приложение связано с правильным аккаунтом, подписи валидны, и домен соответствует указанному в манифесте.
- **Метаданные**: Убедитесь, что ваше мини-приложение отображается именно так, как ожидается, проверяя обязательные поля, такие как название, иконка, теги и загрузочное изображение (splash image).


### Базовые шаги валидации

1. Проверьте доступность манифеста: перейдите по `https://yourdomain.com/.well-known/farcaster.json`
2. Проверьте синтаксис JSON с помощью JSONLint
3. Убедитесь, что ваше приложение загружается без ошибок в консоли

## Быстрая диагностическая процедура

<Tip>Лучший способ проверить работу вашего приложения — использовать встроенный [инструмент Preview](https://base.dev/preview) в Base Build</Tip>

- Не появляется в поиске? → Проблемы с обнаружением и индексацией приложения
- Не отображается как встраивание (embed)? → Проблемы с рендерингом встраиваний
- Проблемы с подключением кошелька? → Проблемы с подключением кошелька
- Нужны инструменты для мобильного тестирования? → Мобильное тестирование и отладка
- Изменения не появляются? → Проблемы с конфигурацией манифеста
- Приложение закрывается при жестах? → Конфликты жестов и проблемы с закрытием приложения

## Подробные решения проблем

### 1. Проблемы с обнаружением и индексацией приложения

Проблема: Ваше мини-приложение не появляется в результатах поиска или каталогах приложений.

Основная причина: Отсутствующая или неполная конфигурация манифеста.

Решение: Убедитесь, что ваш манифест включает все обязательные поля (см. руководство по манифестам).

Критические требования:

- `primaryCategory` обязателен для возможности поиска и страниц категорий
- `accountAssociation` обязателен для верификации

Требования для индексации приложения:

1. Завершите настройку манифеста
2. Поделитесь URL вашего мини-приложения в посте
3. Индексация может занять до 10 минут
4. Проверьте появление в каталогах приложений

Проблемы с кэшированием - изменения не появляются:

Клиенты Farcaster могут кэшировать данные манифеста до 24 часов. Сделайте перепост, чтобы запустить обновление, и подождите ~10 минут.

### 2. Проблемы с конфигурацией манифеста

Проблемы с отображением изображений:

1. Проверьте доступность изображения в режиме инкогнито
2. Убедитесь в правильности формата изображения (поддерживаются PNG, JPG, WebP)
3. Проверьте размеры
4. Убедитесь, что используются только HTTPS URL

### 3. Проблемы с рендерингом встраиваний

Проблема: URL вашего мини-приложения не отображается как насыщенное встраивание при расшаривании.

Основная причина: Неправильные или отсутствующие метаданные `fc:frame`.

Решение: Используйте метатег `name="fc:frame"` в `<head>` и проверьте с помощью инструмента Embed Tool.

### 4. Проблемы с подключением кошелька

Всегда используйте подключенный кошелек пользователя для оптимального опыта. Вы можете сделать это, используя [компонент OnchainKit's Wallet](/onchainkit/wallet/wallet) или хуки Wagmi. Ниже приведен пример с хукoм Wagmi:

```tsx App.tsx
import { useAccount } from 'wagmi';

function MyComponent() {
  const { address, isConnected } = useAccount();
  
  const walletConnected = isConnected;
  
  const userAddress = address; // Криптографически проверено
  
  return (
    <div>
      {walletConnected && (
        <p>Wallet: {userAddress}</p>
      )}
      {/* Используйте данные кошелька для безопасных операций */}
    </div>
  );
}
```



### 5. Конфликты жестов и проблемы с закрытием приложения

Отключите нативные жесты при вызове ready, если вы используете свайпы/перетаскивания:

```ts App.tsx
await sdk.actions.ready({ disableNativeGestures: true });
```

### 6. Мобильное тестирование и отладка

**Настройка мобильной консоли Eruda:**

Добавьте Eruda для отладки через консоль на мобильных устройствах во время разработки:

```tsx App.tsx
import { useEffect } from 'react';

export default function App() {
  useEffect(() => {
    // Загружаем Eruda только в режиме разработки и не на localhost
    if (typeof window !== 'undefined' && 
        process.env.NODE_ENV === 'development' && 
        !window.location.hostname.includes('localhost')) {
      import('eruda').then((eruda) => eruda.default.init());
    }
  }, []);

  return (
    <div>
      {/* Содержимое вашего приложения */}
    </div>
  );
}
```

**Процедура мобильного тестирования:**

1.Разверните в продакшен или используйте ngrok для локального тестирования
2. Поделитесь мини-приложением в личном сообщении (DM) Farcaster себе
3. Откройте в мобильном клиенте (Base App, Farcaster)
4. Используйте консоль Eruda для отладки на мобильном устройстве
5. Протестируйте на нескольких клиентах для проверки совместимости

**Контрольный список для тестирования:**

- [ ] Приложение корректно загружается на мобильных устройствах
- [ ] Сенсорные взаимодействия работают правильно
- [ ] Область просмотра (viewport) имеет правильный размер
- [ ] Изображения загружаются и отображаются корректно
- [ ] В консоли нет критических ошибок

## Продвинутое устранение неполадок

**Инструмент валидации CBW:**

Используйте валидатор Coinbase Wallet для анализа совместимости с приложением Base. Этот инструмент на основе ИИ может выявлять неподдерживаемые паттерны и предлагать улучшения.

**Полный пример манифеста:**

```json farcaster.json
{
  "accountAssociation": {
    "header": "your-farcaster-header",
    "payload": "your-farcaster-payload", 
    "signature": "your-farcaster-signature"
  },
    "baseBuilder": {
    "ownerAddress": "0x..."
  },
  "frame": {
    "name": "Your Mini App",
    "iconUrl": "https://yourapp.com/icon.png",
    "homeUrl": "https://yourapp.com",
    "imageUrl": "https://yourapp.com/og.png",
    "buttonTitle": "Launch App", 
    "description": "Your app description under 130 characters",
    "primaryCategory": "social",
    "tags": ["tag1", "tag2"]
  }
}
```

## Проверка успешности

Базовые чек-листы функциональности и обнаружения/расшаривания: проверьте загрузку, изображения, кошелек, конечную точку манифеста, рендеринг встраиваний и наличие в поиске.

## Получение дополнительной помощи

- [Инструмент Preview Base Build](https://base.dev/preview)  
- JSONLint  
- [Eruda](https://github.com/liriliri/eruda)  
- Base Discord — канал #minikit



