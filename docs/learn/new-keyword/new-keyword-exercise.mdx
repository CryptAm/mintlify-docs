---
title: Упражнение по ключевому слову New
description: Упражнение - продемонстрируйте свои знания ключевого слова `new`.
sidebarTitle: Упражнение
hide_table_of_contents: false
---

Для этого упражнения мы предлагаем вам построить решение, требующее использования ряда концепций, изученных вами до сих пор. Удачи и удовольствия!

---

## Контракты

Создайте контракт, который может развертывать копии контракта адресной книги по требованию, что позволяет пользователям добавлять, удалять и просматривать свои контакты.

Для этого упражнения вам нужно разработать два контракта и импортировать как **минимум** один дополнительный контракт.

## Импортируемые контракты

Ознакомьтесь с контрактом [Ownable](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/access/Ownable.sol) от OpenZeppelin. Вам нужно будет использовать его для решения этого упражнения.

Возможно, вы захотите использовать другой знакомый контракт для помощи в этом задании.

## AddressBook

Создайте контракт `Ownable` под названием `AddressBook`. Он включает:

- `struct` под названием `Contact` со свойствами:
  - `id`
  - `firstName`
  - `lastName`
  - массив `uint` из `phoneNumbers`
- Дополнительное хранилище для `contacts`
- Любые другие необходимые переменные состояния

Он должен включать следующие функции:

### Добавление контакта

Функция `addContact` должна быть доступна только владельцу контракта. Она должна принимать необходимые аргументы для добавления информации заданного контакта в `contacts`.

### Удаление контакта

Функция `deleteContact` должна быть доступна только владельцу и должна удалять контакт под предоставленным номером `_id`.

Если `_id` не найден, она должна выполнить откат (revert) с ошибкой `ContactNotFound` и предоставленным номером id.

### Получение контакта

Функция `getContact` возвращает информацию о контакте по предоставленному номеру `_id`. Она выполняет откат на ContactNotFound, если контакт отсутствует.

<Tip>
**Вопрос**

Для дополнительных баллов (о которых будете знать только вы), объясните, почему мы не можем просто использовать автоматически сгенерированный геттер для `contacts`?
</Tip>


### Получение всех контактов

Функция `getAllContacts` возвращает массив со всеми текущими, неудаленными контактами пользователя.

<Warning>
Вам не следует использовать `onlyOwner` для двух _get_-функций. Это не предотвратит доступ третьей стороны к информации, потому что вся информация в блокчейне публична. Однако это может создать ошибочное впечатление, что информация скрыта, что может привести к инциденту безопасности.
</Warning>


## AddressBookFactory

`AddressBookFactory` содержит одну функцию `deploy`. Она создает экземпляр `AddressBook` и назначает вызывающего владельцем этого экземпляра. Затем она возвращает `address` вновь созданного контракта.

---

## Отправьте свой контракт и получите NFT-значок! (BETA)

<Note>
#### Эй, куда делся мой NFT?!

[Тестовые сети](/learn/deployment-to-testnet/test-networks) не являются постоянными! Base Goerli [скоро будет приостановлена](https://base.mirror.xyz/kkz1-KFdUwl0n23PdyBRtnFewvO48_m-fZNzPMJehM4), в пользу Base Sepolia.

Поскольку это отдельные сети с отдельными данными, ваши NFT **не будут** перенесены.

**Не волнуйтесь!** Мы зафиксировали адреса всех владельцев NFT в Base Goerli и включим их, когда позже в этом году выпустим механизм для переноса этих NFT в основную сеть (mainnet)! Вы также можете повторно развернуть в Sepolia и отправить заново, если хотите!
</Note>

{/* <CafeUnitTest nftNum={12} /> */}

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=components-cafeunittest--twelve&viewMode=story&dark=true&hero=true"
  width="100%"
  height="auto"
/>
