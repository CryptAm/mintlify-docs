---
title: Упражнение по токенам ERC-721
description: Упражнение - Создайте свой собственный NFT!
sidebarTitle: Упражнение
hide_table_of_contents: false
---

import { Danger } from "/snippets/danger.mdx";

Создайте контракт, соответствующий следующим спецификациям.

---

## Контракт

Создайте контракт с именем `HaikuNFT`. Добавьте следующее в контракт:

- `struct` с именем `Haiku` для хранения `address` автора и строк `line1`, `line2` и `line3`
- Публичный массив для хранения этих `haikus`
- Публичное `mapping`  для связи `sharedHaikus` от `address` кошелька, с которым поделились, с id общего NFT хайку
- Публичный `counter` для использования в качестве id и для отслеживания и совместного использования общего количества созданных хайку
  - Если создано 10 хайку, счетчик должен быть на 11, чтобы служить следующим id
  - НЕ назначайте id 0 для хайку
- Другие переменные, необходимые для выполнения задачи

Добавьте следующие функции.

### Конструктор

Как требуется.

### Минт хайку

Добавьте `external` функцию `mintHaiku`, которая принимает три строки стихотворения. Эта функция должна создать NFT для минтера и сохранить его хайку.

Хайку должны быть **уникальными**! Если любая строка в хайку была использована как любая строка предыдущего хайку, выполните откат (revert) с ошибкой `HaikuNotUnique()`.

Вам **не нужно** считать слоги, но было бы здорово, если бы вы это сделали! (Не обещаем, что мы считаем так же, как и вы)

### Поделиться хайку

Добавьте `public` функцию `shareHaiku`, которая позволяет владельцу NFT хайку поделиться этим хайку с указанным `address`, на который они отправляют его `_to`. Это должно добавить его в запись этого адреса в `sharedHaikus`.

Если отправитель не является владельцем хайку, вместо этого выполните откат с ошибкой `NotYourHaiku`. Включите id хайку в ошибку.

<Danger>
Помните, все в блокчейне публично. Эта функция обмена может быть расширена для функций, подобных разрешению пользователю приложения отображать выбранное общее хайку в своем профиле.

Это ничего не делает для предотвращения того, чтобы кто угодно мог видеть или копировать/вставлять хайку!
</Danger>


### Получить ваши общие хайку

Добавьте `public` функцию `getMySharedHaikus`. При вызове она должна возвращать массив, содержащий все хайку, которыми поделились с вызывающим.

Если с кошельком вызывающего не поделились ни одним хайку, функция должна выполнить откат с пользовательской ошибкой `NoHaikusShared`, без аргументов.

---

<Warning>
Спецификация контракта содержит действия, которые могут быть выполнены только один раз данным адресом. В результате модульные тесты для проходящего контракта будут успешными только **первый** раз, когда вы тестируете.

**Возможно, вам потребуется отправить новое развертывание, чтобы пройти тест**
</Warning>


### Отправьте свой контракт и получите NFT-значок! (BETA)

<Note>
#### Эй, куда делся мой NFT?!

[Тестовые сети](../deployment-to-testnet/test-networks) не являются постоянными! Base Goerli [скоро будет приостановлена](https://base.mirror.xyz/kkz1-KFdUwl0n23PdyBRtnFewvO48_m-fZNzPMJehM4), в пользу Base Sepolia.

Поскольку это отдельные сети с отдельными данными, ваши NFT **не будут** перенесены.

**Не волнуйтесь!** Мы зафиксировали адреса всех владельцев NFT на Base Goerli и включим их, когда позже в этом году выпустим механизм переноса этих NFT в основную сеть! Вы также можете повторно развернуть на Sepolia и повторно отправить, если хотите!
</Note>


{/* <CafeUnitTest nftNum={15}/> */}

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=components-cafeunittest--fifteen&viewMode=story&dark=true&hero=true"
  width="100%"
  height="auto"
/>
