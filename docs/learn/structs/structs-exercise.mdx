---
title: Упражнение по структурам
description: Упражнение - продемонстрируйте свои знания о структурах.
hide_table_of_contents: false
sidebarTitle: Exercise
---

Создайте контракт, соответствующий следующим спецификациям.

---

## Контракт

Создайте контракт с именем `GarageManager`. Добавьте следующее в хранилище:

- Публичное отображение (mapping) `garage` для хранения списка `Car` (описано ниже), индексированное по адресу

Добавьте следующие типы и функции.

### Структура Car

Реализуйте `struct` с именем `Car`. Она должна хранить следующие свойства:

- `make`
- `model`
- `color`
- `numberOfDoors`

### Добавление автомобиля в гараж

Добавьте функцию `addCar`, которая добавляет автомобиль в коллекцию пользователя в `garage`. Она должна:

- Использовать `msg.sender` для определения владельца
- Принимать аргументы для марки, модели, цвета и количества дверей и использовать их для создания нового экземпляра `Car`
- Добавлять этот `Car` в `garage` по адресу пользователя

### Получение всех автомобилей вызывающего пользователя

Добавьте функцию `getMyCars`. Она должна возвращать массив со всеми автомобилями, принадлежащими вызывающему пользователю.

### Получение всех автомобилей для любого пользователя

Добавьте функцию `getUserCars`. Она должна возвращать массив со всеми автомобилями для любого заданного `address`.

### Обновление автомобиля

Добавьте функцию `updateCar`. Она должна принимать `uint` для индекса обновляемого автомобиля и аргументы для всех типов `Car`.

Если у отправителя нет автомобиля по этому индексу, функция должна выполнить откат (revert) с пользовательской `error` `BadCarIndex` и предоставленным индексом.

В противном случае она должна обновить эту запись новыми свойствами.

### Сброс моего гаража

Добавьте публичную функцию `resetMyGarage`. Она должна удалить запись в `garage` для отправителя.

---

### Отправьте свой контракт и получите NFT-значок! (BETA)

<Note>
#### Эй, куда делся мой NFT?!

[Тестовые сети](/learn/deployment-to-testnet/test-networks) не являются постоянными! Base Goerli [скоро будет приостановлена](https://base.mirror.xyz/kkz1-KFdUwl0n23PdyBRtnFewvO48_m-fZNzPMJehM4), в пользу Base Sepolia.

Поскольку это отдельные сети с отдельными данными, ваши NFT **не будут** перенесены.

**Не волнуйтесь!** Мы зафиксировали адреса всех владельцев NFT на Base Goerli и включим их, когда позже в этом году выпустим механизм переноса этих NFT в основную сеть! Вы также можете повторно развернуть на Sepolia и повторно отправить, если хотите!
</Note>

{/* <CafeUnitTest nftNum={7}/> */}

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=components-cafeunittest--seven&viewMode=story&dark=true&hero=true"
  width="100%"
  height="auto"
/>

<Accordion title="⚠️ Осторожно, спойлер: Открывайте только если тесты не проходят">
Убедитесь, что размеры ваших переменных соответствуют их предполагаемому использованию, и учитывайте нюансы упаковки в Solidity. Ресурсы: [Solidity - Layout in Storage](https://docs.soliditylang.org/en/v0.8.17/internals/layout_in_storage.html#layout-of-state-variables-in-storage), [Variables in Struct](/learn/structs/structs-sbs#setting-up-the-struct)
</Accordion>
