---
title: viem
slug: /tools/viem
description: Документация по использованию Viem, интерфейса TypeScript для EVM-совместимых блокчейнов. На этой странице рассматривается установка, настройка и различные функциональные возможности, такие как чтение и запись данных блокчейна, а также взаимодействие со смарт-контрактами на Base.
---

# viem

<Info>
Viem в настоящее время доступен только в тестнете Base Sepolia.
</Info>

[viem](https://viem.sh/) - это интерфейс TypeScript для Ethereum, который предоставляет низкоуровневые примитивы без состояния (stateless primitives) для взаимодействия с Ethereum.

Вы можете использовать viem для взаимодействия со смарт-контрактами, развернутыми на Base.

## Установка

Чтобы установить viem, выполните следующую команду:

```bash
npm install --save viem
```

## Настройка

Прежде чем начать использовать viem, вам нужно настроить [Client](https://viem.sh/docs/clients/intro.html) с желаемым [Transport](https://viem.sh/docs/clients/intro.html) и [Chain](https://viem.sh/docs/chains/introduction).

```javascript
import { createPublicClient, http } from 'viem';
import { base } from 'viem/chains';

const client = createPublicClient({
  chain: base,
  transport: http(),
});
```

<Info>
Для использования Base необходимо указать `base` в качестве цепи при создании Клиента.

Для использования Base Sepolia (тестнет) замените `base` на `baseSepolia`.
</Info>

## Чтение данных из блокчейна

После создания клиента вы можете использовать его для чтения и доступа к данным из Base с помощью [Public Actions](https://viem.sh/docs/actions/public/introduction.html)

Публичные Действия - это методы клиента, которые соотносятся один к одному с "публичным" методом Ethereum RPC (`eth_blockNumber`, `eth_getBalance` и т.д.).

Например, вы можете использовать метод клиента `getBlockNumber` для получения последнего блока:

```javascript
const blockNumber = await client.getBlockNumber();
```

## Запись данных в блокчейн

Чтобы записать данные в Base, вам нужно создать клиент кошелька (`createWalletClient`) и указать используемый [`Account`](https://ethereum.org/en/developers/docs/accounts/).

```javascript
import { createWalletClient, custom } from 'viem'
import { base } from 'viem/chains'

//highlight-start
const [account] = await window.ethereum.request({ method: 'eth_requestAccounts' })
//highlight-end

const client = createWalletClient({
  //highlight-next-line
  account,
  chain: base,
  transport: custom(window.ethereum)
})

client.sendTransaction({ ... })
```

<Info>
В дополнение к выполнению JSON-RPC запроса (`eth_requestAccounts`) для получения Аккаунта, viem предоставляет различные вспомогательные методы для создания `Аккаунта`, включая: [`privateKeyToAccount`](https://viem.sh/docs/accounts/local/privateKeyToAccount), [`mnemonicToAccount`](https://viem.sh/docs/accounts/local/mnemonicToAccount), и [`hdKeyToAccount`](https://viem.sh/docs/accounts/local/hdKeyToAccount).

Для использования Base Sepolia (тестнет) замените`base` на `baseSepolia`.
</Info>

## Взаимодействие со смарт-контрактами

Вы можете использовать viem для взаимодействия со смарт-контрактом на Base, создав экземпляр `Contract` с помощью [`getContract`](https://viem.sh/docs/contract/getContract.html) и передав ему ABI контракта, адрес контракта и [Public](https://viem.sh/docs/clients/public.html) и/или [Wallet](https://viem.sh/docs/clients/wallet.html) Клиент:

```javascript
import { getContract } from 'viem';
import { wagmiAbi } from './abi';
import { publicClient } from './client';

// 1. Создаем экземпляр контракта
const contract = getContract({
  address: 'CONTRACT_ADDRESS',
  abi: wagmiAbi,
  publicClient,
});

// 2. Вызываем методы контракта, слушаем события и т.д.
const result = await contract.read.totalSupply();
```

<Info>
`CONTRACT_ADDRESS` - это адрес развернутого контракта.
</Info> 
