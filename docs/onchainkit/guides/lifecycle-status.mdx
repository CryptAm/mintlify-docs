---
title: Lifecycle Status · OnchainKit
sidebarTitle: Lifecycle Status
description: Как влиять на поведение ваших компонентов и ончейн-данных с помощью Lifecycle Status.
---

Lifecycle Status в OnchainKit позволяет вам беспрепятственно управлять состоянием API и ончейн-транзакций внутри компонентов.

## Как отслеживать Lifecycle Status

Lifecycle Status - это объект TypeScript, который предоставляет легкий доступ к свойствам `statusName` и `statusData`, позволяя вам оставаться в курсе событий и быстро реагировать.

```tsx
import { useCallback } from 'react';
import { Transaction } from '@coinbase/onchainkit/transaction';
// ---cut-before---
import type { LifecycleStatus } from '@coinbase/onchainkit/transaction';

const handleOnStatus = useCallback((status: LifecycleStatus) => {
  console.log('LifecycleStatus', status);
}, []);

<Transaction onStatus={handleOnStatus}>
  // код компонента опущен для краткости
</Transaction>
```

## Lifecycle Status

Lifecycle Status включает 3 состояния, общих для всех компонентов:

### `init`

Компонент инициализирован и готов к использованию.

```ts
{
  statusName: 'init';
  statusData: null;
}
```

### `success`

Компонент успешно выполнил свое основное действие, такое как `swap` или `transaction`.

```ts
{
  statusName: 'success';
  statusData: {
    // данные, возвращенные API или ончейн-операцией
  };
}
```

### `error`

Компонент столкнулся с проблемой при получении данных API, выполнении ончейн-операции или ему необходимо отобразить визуальное сообщение пользователю.

```ts
{
  statusName: 'error';
  statusData: {
    code: string; // Код ошибки, указывающий на место возникновения ошибки
    error: string; // Сообщение об ошибке с деталями для разработчика
    message: string; // Сообщение об ошибке с деталями для пользователя
  };
}
```

Каждый компонент предлагает свой уникальный опыт, и мы рассмотрели как процессы обмена (swap), так и транзакций.

## Lifecycle Status с компонентом [`<Swap />`](/onchainkit/swap/swap)

### `amountChange`

Любое из полей ввода Swap было обновлено.

```ts
{
  statusName: 'amountChange';
  statusData: {
    amountFrom: string;
    amountTo: string;
    tokenFrom?: Token;
    tokenTo?: Token;
    isMissingRequiredField: boolean;
  };
}
```

### `transactionPending`

Транзакция была отправлена в сеть, но еще не подтверждена для включения в блок. В этом ожидающем состоянии транзакция ждет проверки механизмом консенсуса сети.

```ts
{
  statusName: 'transactionPending';
  statusData: null;
}
```

### `transactionApproved`

Транзакция была проверена как действительная и включена в блок, однако транзакция еще не завершена окончательно.

```ts
{
  statusName: 'transactionApproved';
  statusData: {
    transactionHash: Hex;
    transactionType: 'Batched' | 'ERC20' | 'Permit2' | 'Swap';
  };
}
```

### `success`

Транзакция была добавлена в блокчейн и считается окончательной.

```ts
{
  statusName: 'success';
  statusData: {
    transactionReceipt: TransactionReceipt;
  };
}
```

## Lifecycle Status с компонентом [`<Transaction />`](/onchainkit/transaction/transaction)

### `transactionIdle`

Компонент транзакции ожидает действия пользователя.

```ts
{
  statusName: 'transactionIdle';
  statusData: null;
}
```

### `transactionPending`

Транзакция была отправлена в сеть, но еще не подтверждена для включения в блок. 
В этом ожидающем состоянии транзакция ждет проверки механизмом консенсуса сети.

```ts
{
  statusName: 'transactionPending';
  statusData: null;
}
```

### `success`

Транзакция была добавлена в блокчейн и считается окончательной.

```ts
{
  statusName: 'success';
  statusData: {
    transactionReceipts: TransactionReceipt[];
  };
}
```

