---
title: '–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é —Å–ø–æ–Ω—Å–∏—Ä—É–µ–º—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Å–æ —Å–º–∞—Ä—Ç-–∞–∫–∫–∞—É–Ω—Ç–∞'
sidebar_label: –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Headless)
---

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±—ã—Å—Ç—Ä–æ–º—É —Å—Ç–∞—Ä—Ç—É Paymaster –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞—à—É –ø–µ—Ä–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Å–æ —Å–º–∞—Ä—Ç-–∞–∫–∫–∞—É–Ω—Ç–∞ –≤ —Å–µ—Ç–∏ Base Sepolia —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º [Viem](https://viem.sh/), –∏ —Å–ø–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è –≥–∞–∑–∞ –æ—Ç [Coinbase Developer Platform](https://portal.cdp.coinbase.com/products/bundler-and-paymaster). –ü—Ä–∏–º–µ—Ä –Ω–∏–∂–µ —Å–ø–æ–Ω—Å–∏—Ä—É–µ—Ç –º–∏–Ω—Ç NFT, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤—ã–∑–æ–≤–∞ –ª—é–±–æ–≥–æ –≤–∞—à–µ–≥–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

```
node >= 14.0.0
npm >= 6.0.0
```

## –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –Ω–∞ Base Sepolia

> **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç Paymaster & Bundler –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Ç–∏ Base (Sepolia) –∏–∑ CDP**

1. [–°–æ–∑–¥–∞–π—Ç–µ](https://coinbase.com/developer-platform) –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç CDP –∏–ª–∏ [–≤–æ–π–¥–∏—Ç–µ](https://portal.cdp.coinbase.com) –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π.
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ [Paymaster](https://portal.cdp.coinbase.com/products/bundler-and-paymaster).
3.–ê–¥—Ä–µ—Å NFT-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã –≤—ã–∑—ã–≤–∞–µ–º: `0x66519FCAee1Ed65bc9e0aCc25cCD900668D3eD49`. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ (allowlist) –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª–∏—Ç–∏–∫—É.
4. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤—É—é —Å–µ—Ç—å Base (Sepolia) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–∞—Ö.

<Accordion title="–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∫–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è)">
<Frame caption="Paymaster - –ü–æ–ª–∏—Ç–∏–∫–∞ –ì–∞–∑–∞">
<img
  src="/images/paymaster/pb-paymaster-config-highlight.png"
  width="700"
  alt=""
/>
</Frame>
</Accordion>

## –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

**–ö–∞–∫ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –º–∏–Ω—Ç–∞ NFT-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ Base Sepolia (–∏–ª–∏ –ª—é–±–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)**

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

–í –≤–∞—à–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `paymaster-tutorial` –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å –ø–æ–º–æ—â—å—é [npm](https://www.npmjs.com/).

```js
mkdir paymaster-tutorial
cd paymaster-tutorial
npm init es6
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `viem`.

```js
npm install viem
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Å–º–∞—Ä—Ç-–∞–∫–∫–∞—É–Ω—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞

–ü—Ä–∏–º–µ—Ä –Ω–∏–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Coinbase Smart Wallet, –Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –ª—é–±–æ–π —Å–º–∞—Ä—Ç-–∞–∫–∫–∞—É–Ω—Ç.
a. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —Å –ø–æ–º–æ—â—å—é [Foundry](https://book.getfoundry.sh/reference/cast/cast-wallet-new).
b. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Foundry: `curl -L https://foundry.paradigm.xyz | bash`
c. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—É—é –ø–∞—Ä—É –∫–ª—é—á–µ–π: `cast wallet new`.
d. –û–±–Ω–æ–≤–∏—Ç–µ –≤–∞—à —Ñ–∞–π–ª `config.js` –¥–æ–±–∞–≤–∏–≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á, –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç.

```js
//config.js
import { createPublicClient, http } from 'viem';
import { toCoinbaseSmartAccount } from 'viem/account-abstraction';
import { baseSepolia } from 'viem/chains';
import { privateKeyToAccount } from 'viem/accounts';

// –í–∞—à RPC URL. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å–µ—Ç—å (base vs base-sepolia)
export const RPC_URL = 'https://api.developer.coinbase.com/rpc/v1/base-sepolia/<your-rpc-token>';

export const client = createPublicClient({
  chain: baseSepolia,
  transport: http(RPC_URL),
});

// –°–æ–∑–¥–∞–µ—Ç Coinbase Smart Wallet, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–∞ EOA
const owner = privateKeyToAccount('<your-private-key>');
export const account = await toCoinbaseSmartAccount({
  client,
  owners: [owner],
});
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ABI –≤–∞—à–µ–≥–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `example-app-abi.js` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è ABI –Ω–∞—à–µ–≥–æ NFT-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ –µ–≥–æ –∞–¥—Ä–µ—Å–∞. –í–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —ç—Ç–æ –Ω–∞ ABI –≤–∞—à–µ–≥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

```js
//example-app-abi.js
export const abi = [
  {
    inputs: [
      { internalType: 'address', name: 'recipient', type: 'address' },
      { internalType: 'uint16', name: 'item', type: 'uint16' },
    ],
    name: 'mintTo',
    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],
    stateMutability: 'payable',
    type: 'function',
  },
];
```

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ Bundler –∏ Paymaster, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª `index.js`

```ts
//index.js
import { http } from 'viem';
import { baseSepolia } from 'viem/chains';
import { createBundlerClient } from 'viem/account-abstraction';
import { account, client, RPC_URL } from './config.js';
import { abi } from './example-app-abi.js';

// –õ–æ–≥–∏—Ä—É–µ—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –∞–¥—Ä–µ—Å, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—à–∏–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º
console.log(`Minting nft to ${account.address}`);

// –ë–∞–Ω–¥–ª–µ—Ä - —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–º–µ—â–∞–µ—Ç –≤–∞—à—É UserOperation –≤ —Ü–µ–ø–∏
const bundlerClient = createBundlerClient({
  account,
  client,
  transport: http(RPC_URL),
  chain: baseSepolia,
});

// –í—ã–∑–æ–≤ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç ABI –≤–∞—à–µ–≥–æ dapp
const nftContractAddress = '0x66519FCAee1Ed65bc9e0aCc25cCD900668D3eD49';
const mintTo = {
  abi: abi,
  functionName: 'mintTo',
  to: nftContractAddress,
  args: [account.address, 1],
};
const calls = [mintTo];

// –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç preVerificationGas (–∏–ª–∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –ª–∏–º–∏—Ç—ã –≥–∞–∑–∞) –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è UserOperation –≤ —Ü–µ–ø–∏
account.userOperation = {
  estimateGas: async (userOperation) => {
    const estimate = await bundlerClient.estimateUserOperationGas(userOperation);
    // —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º preVerificationGas
    estimate.preVerificationGas = estimate.preVerificationGas * 2n;
    return estimate;
  },
};

// –ü–æ–¥–ø–∏—Å–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å UserOperation
try {
  const userOpHash = await bundlerClient.sendUserOperation({
    account,
    calls,
    paymaster: true,
  });

  const receipt = await bundlerClient.waitForUserOperationReceipt({
    hash: userOpHash,
  });

  console.log('‚úÖ Transaction successfully sponsored!');
  console.log(
    `‚õΩ View sponsored UserOperation on blockscout: https://base-sepolia.blockscout.com/op/${receipt.userOpHash}`,
  );
  console.log(
    `üîç View NFT mint on basescan: https://sepolia.basescan.org/address/${account.address}`,
  );
  process.exit();
} catch (error) {
  console.log('Error sending transaction: ', error);
  process.exit(1);
}
```

–í –≤–∞—à–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É –Ω–∏–∂–µ, –Ω–∞—Ö–æ–¥—è—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

```js
node index.js
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ò–∑–º–µ–Ω–∏—Ç–µ –≤–∞—à —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ (allowlist) –∏ –ø–æ–ª–∏—Ç–∏–∫—É –≥–∞–∑–∞, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∂–µ–ª–∞–µ–º—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π!

## –î—Ä—É–≥–∏–µ –ø—Ä–∏–º–µ—Ä—ã

–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å Coinbase Smart Wallet –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –Ω–∞—à–µ–º –¥—Ä—É–≥–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –ø–æ –±—ã—Å—Ç—Ä–æ–º—É —Å—Ç–∞—Ä—Ç—É –∏–ª–∏ –Ω–∞ [smartwallet.dev](https://smartwallet.dev/).

–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å –¥—Ä—É–≥–∏–º–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ SDK –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∑–¥–µ—Å—å: [paymaster-bundler-examples](https://github.com/coinbase/paymaster-bundler-examples/tree/master/examples).

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

–ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω–µ—Ç–µ—Å—å —Å –∫–∞–∫–∏–º–∏-–ª–∏–±–æ –æ—à–∏–±–∫–∞–º–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —ç—Ç–∏–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∞—à–∏–º [troubleshooting guide](https://docs.cdp.coinbase.com/paymaster/docs/paymaster-bundler-troubleshooting).

