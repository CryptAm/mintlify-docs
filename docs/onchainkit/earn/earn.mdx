---
title: <Earn /> · OnchainKit
sidebarTitle: <Earn />
description: Зарабатывайте проценты на вашей криптовалюте с помощью OnchainKit
---

Компонент `Earn` предоставляет простой интерфейс для заработка процентов на вашей криптовалюте через vaults Morpho на Base.

## Предварительные требования

Перед использованием компонента `Earn` убедитесь, что вы выполнили шаги из ['Начало работы'](/onchainkit/getting-started).

### Запуск нового проекта

Если вы начинаете новый проект, мы рекомендуем использовать `create onchain` для создания каркаса проекта.

```bash
npm create onchain@latest
```

### Добавление к существующему проекту

Если вы добавляете `Earn` к существующему проекту, просто установите OnchainKit.

<CodeGroup>
```bash npm
npm install @coinbase/onchainkit
```

```bash yarn
yarn add @coinbase/onchainkit
```

```bash pnpm
pnpm add @coinbase/onchainkit
```

```bash bun
bun add @coinbase/onchainkit
```
</CodeGroup>

Оберните <OnchainKitProvider /> вокруг вашего приложения, следуя шагам в ['Начало работы'](/onchainkit/getting-started#add-providers).

## Быстрый старт

Чтобы использовать Earn, вам необходимо предоставить свойство vaultAddress. Адрес vault можно получить на странице [Vaults](https://app.morpho.org/base/earn) Morpho.

```tsx
// @noErrors: 2307
import { Earn } from '@coinbase/onchainkit/earn'; // [!code focus]

<Earn vaultAddress="0x7BfA7C4f149E7415b73bdeDfe609237e29CBF34A" /> // [!code focus]
```

{/* <EarnMain /> */}

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=onchainkit-earn--main&viewMode=story&dark=true&hero=true"
  width="100%"
  height="400px"
/>

## Настройка

### Пользовательские компоненты и макеты

`Earn` принимает свойство `children`, которое можно использовать для рендеринга подкомпонентов `Earn` или пользовательских компонентов.

Например, вы можете отрендерить компонент `EarnDeposit` самостоятельно внутри компонента `Earn`, вместе с любыми другими пользовательскими компонентами, которые вы хотите отобразить.

```tsx
// @noErrors: 2307
import { Earn, EarnDeposit } from '@coinbase/onchainkit/earn';

<Earn vaultAddress="0x7BfA7C4f149E7415b73bdeDfe609237e29CBF34A">
  <div>Custom header</div>
  <EarnDeposit />
  <div>Custom footer</div>
</Earn>
```

{/* <EarnDeposit /> */}

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=onchainkit-earn--deposit&viewMode=story&dark=true&hero=true"
  width="100%"
  height="450px"
/>

Для более детального контроля вы также можете рендерить низкоуровневые подкомпоненты внутри `EarnDeposit` и `EarnWithdraw`. Эти подкомпоненты принимают свойства `className` для настройки их стилей.

```tsx
import { Earn,
        EarnDeposit,
        EarnDetails,
        DepositBalance,
        DepositAmountInput,
        DepositButton } from '@coinbase/onchainkit/earn';

<Earn vaultAddress="0x7BfA7C4f149E7415b73bdeDfe609237e29CBF34A">
  <EarnDeposit>
    <EarnDetails />
    <DepositBalance />
    <DepositAmountInput className="border-2 border-green-400" />
    <DepositButton />
  </EarnDeposit>
</Earn>
```

{/* <RearrangedEarnDeposit /> */}

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=onchainkit-earn--rearranged-deposit&viewMode=story&dark=true&hero=true"
  width="100%"
  height="400px"
/>

### Настройка стилей

Компонент `Earn` лучше всего стилизируется через [тему OnchainKit](/onchainkit/guides/themes#custom-theme). Вы также можете переопределить стили отдельных компонентов, используя `className`.

## Продвинутое использование

Если вы хотите реализовать свои собственные пользовательские компоненты, вы можете использовать `useEarnContext` внутри компонента `Earn` для доступа к контексту и создания своих компонентов.

Полный интерфейс для `EarnContextType` можно найти на [странице Types](/onchainkit/earn/types#earncontexttype).

Ниже мы используем `useEarnContext` для реализации пользовательского интерфейса депозита, используя `useEarnContext` для доступа к значениям контекста `depositAmount` и `setDepositAmount`.

<CodeGroup>
```tsx index.tsx
// @noErrors: 2307
import { Earn, useEarnContext } from '@coinbase/onchainkit/earn';
import { CustomDepositButtons } from '@/custom-deposit-buttons';

  <Earn vaultAddress="0x7BfA7C4f149E7415b73bdeDfe609237e29CBF34A">
      <CustomDepositButtons />
  </Earn>

```

```tsx custom-deposit-buttons.tsx
import {EarnDetails,
        EarnDeposit,
        useEarnContext,
        DepositButton} from '@coinbase/onchainkit/earn';

const predefinedAmounts = ['0.1', '1', '10'];

function CustomDepositButtons() {
  const { depositAmount, setDepositAmount } = useEarnContext();

  return (
    <EarnDeposit>
      <EarnDetails />
      <div className="grid grid-cols-3 gap-2">
        {predefinedAmounts.map((amount) => {
          const selected = amount === depositAmount;
          return (
            <button
              key={amount}
              type="button"
              onClick={() => setDepositAmount(amount)}
              className={`rounded-md px-4 py-2
              ${selected ? 'bg-[var(--ock-bg-primary)] text-[var(--ock-text-inverse)]'
              : 'bg-[var(--ock-bg-secondary)] text-[var(--ock-text-primary)]'}`}
            >
              {amount}
            </button>
          );
        })}
      </div>
      <DepositButton />
    </EarnDeposit>
  );
}
```
</CodeGroup>

{/* <PredefinedInputDeposit /> */}

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=onchainkit-earn--predefined-deposit&viewMode=story&dark=true&hero=true"
  width="100%"
  height="400px"
/>

Используя преимущества данных и методов, предоставляемых `useEarnContext`, разработчики могут реализовать полностью пользовательские интерфейсы депозита и вывода, изменяя все от элементов UI до поведения ввода.

## Примеры

### Спонсирование транзакций

Чтобы спонсировать транзакции, вы можете использовать свойство `isSponsored`.

```tsx
// @noErrors: 2304
<Earn vaultAddress="0x7BfA7C4f149E7415b73bdeDfe609237e29CBF34A" isSponsored />
```

Убедитесь, что ваш `OnchainKitProvider` имеет настроенный `paymaster`:

```tsx
// @noErrors:  2304 17008 1005
<OnchainKitProvider
  config={{ // [!code focus]
    paymaster: process.env.PAYMASTER_ENDPOINT, // [!code focus]
  }} // [!code focus]
>
```

<Tip>
Если у вас установлен список разрешенных контрактов (contract allowlist) в Coinbase Developer Platform, вам необходимо убедиться, что следующие функции контракта разрешены:

- `deposit` на Morpho vault
- `redeem` на Morpho vault
- `approve` на токене, который депозитируется
</Tip>


## Компоненты

Компонент `Earn` включает следующие подкомпоненты:

- `<Earn />` - Полностью готовый компонент для вывода и депозита. Также включает свойство `children` для рендеринга пользовательских компонентов и предоставляет `useEarnContext` для доступа к значениям контекста.
- `<EarnProvider />` - Головной провайдер, который предоставляет хук useEarnContext компоненту `Earn`.
- `<EarnDeposit />` - Полностью готовая карточка депозита.
- `<EarnWithdraw />` - Полностью готовая карточка вывода.
- `<EarnDetails />` - Компонент, который отображает детали vault.
- `<DepositAmountInput />` - Компонент, который обрабатывает ввод суммы депозита.
- `<DepositBalance />` - Компонент, который отображает баланс базового актива в кошельке пользователя.
- `<DepositButton />` - Компонент, который инициирует транзакцию депозита.
- `<WithdrawAmountInput />` - Компонент, который обрабатывает ввод суммы вывода.
- `<WithdrawBalance />` - Компонент, который отображает, сколько пользователь может вывести из vault.
- `<WithdrawButton />` - Компонент, который инициирует транзакцию вывода.
- `<YieldDetails />` - Компонент, который отображает детали доходности vault.
- `<VaultDetails />` - Компонент, который отображает детали vault.

## Хуки

- [`useEarnContext`](/onchainkit/hooks/use-earn-context) - Хук, который предоставляет значения контекста компонента `Earn`.
- [`useBuildDepositToMorphoTx`](/onchainkit/hooks/use-build-deposit-to-morpho-tx) - Хук, который создает транзакцию депозита в Morpho.
- [`useBuildWithdrawFromMorphoTx`](/onchainkit/hooks/use-build-withdraw-from-morpho-tx) - Хук, который создает транзакцию вывода из Morpho.
- [`useMorphoVault`](/onchainkit/hooks/use-morpho-vault) - Хук, который предоставляет детали vault Morpho.

## Свойства (Props)

- [`LifecycleStatus`](/onchainkit/earn/types#lifecyclestatus)
- [`EarnReact`](/onchainkit/earn/types#earnreact)
- [`EarnProviderReact`](/onchainkit/earn/types#earnproviderreact)
- [`EarnContextType`](/onchainkit/earn/types#earncontexttype)
- [`EarnAmountInputReact`](/onchainkit/earn/types#earnamountinputreact)
- [`DepositAmountInputReact`](/onchainkit/earn/types#depositamountinputreact)
- [`WithdrawAmountInputReact`](/onchainkit/earn/types#withdrawamountinputreact)
- [`EarnBalanceReact`](/onchainkit/earn/types#earnbalancereact)
- [`DepositBalanceReact`](/onchainkit/earn/types#depositbalancereact)
- [`WithdrawBalanceReact`](/onchainkit/earn/types#withdrawbalancereact)
- [`EarnDepositReact`](/onchainkit/earn/types#earndepositreact)
- [`EarnWithdrawReact`](/onchainkit/earn/types#earnwithdrawreact)
- [`EarnDetailsReact`](/onchainkit/earn/types#earndetailsreact)
- [`DepositButtonReact`](/onchainkit/earn/types#depositbuttonreact)
- [`WithdrawButtonReact`](/onchainkit/earn/types#withdrawbuttonreact)

