---
title: setupOnrampEventListeners
---


Утилита `setupOnrampEventListeners` настраивает обработчики событий для виджета Coinbase Onramp. Она помогает вам обрабатывать различные события, такие как успешные покупки, выходы и другие взаимодействия пользователя.

## Использование

<CodeGroup>
```tsx code
// @errors: 2305
import { setupOnrampEventListeners } from '@coinbase/onchainkit/fund';
import type { SuccessEventData, OnrampError, EventMetadata } from '@coinbase/onchainkit/fund';
const unsubscribe = setupOnrampEventListeners({
  onSuccess: (data: SuccessEventData) => {
    console.log('Purchase successful:', data);
  },
  onExit: (error: OnrampError) => {
    if (error) {
      console.error('Exit with error:', error);
    }
  },
  onEvent: (event: EventMetadata) => {
    console.log('Event received:', event);
  },
});

// Очистка по завершении
unsubscribe();
```

```ts return value
// Возвращает функцию отмены подписки
() => void
```
</CodeGroup>

## Параметры

```typescript
{
  host?: string;                                   // Опциональный пользовательский URL хоста
  onSuccess?: (data?: SuccessEventData) => void;  // callback успеха
  onExit?: (error?: OnrampError) => void;         // callback выхода
  onEvent?: (event: EventMetadata) => void;       // Общий callback событий
}
```

## Возвращает

`() => void` - Возвращает функцию отмены подписки, которая удаляет обработчики событий при вызове.

## Типы событий

Смотрите следующие определения типов для данных событий:

- [`SuccessEventData`](/onchainkit/fund/types#successeventdata)
- [`OnrampError`](/onchainkit/fund/types#onramperror)
- [`EventMetadata`](/onchainkit/fund/types#eventmetadata)

