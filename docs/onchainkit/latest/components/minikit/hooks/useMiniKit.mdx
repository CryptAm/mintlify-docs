---
title: useMiniKit
description: Доступ к контексту фрейма и управление состоянием готовности
---

Определен в [@coinbase/onchainkit](https://github.com/coinbase/onchainkit)

<Info>
Основной хук для доступа к контексту фрейма MiniKit и управления готовностью фрейма. Этот хук предоставляет важную информацию о состоянии мини-приложения и контексте пользователя.
</Info>

## Возвращает

<ResponseField name="context" type="MiniKitContext">
Информация о контексте фрейма, предоставленная хост-приложением.

<Expandable title="Свойства MiniKitContext">
<ResponseField name="user" type="object">
Информация о пользователе из хост-приложения.

<Expandable title="Свойства User">
<ResponseField name="fid" type="string">
Farcaster ID текущего пользователя. Может быть подделан - используйте только для аналитики.
</ResponseField>
</Expandable>
</ResponseField>

<ResponseField name="client" type="object">
Информация о хост-клиентском приложении.

<Expandable title="Свойства Client">
<ResponseField name="added" type="boolean">
Сохранил ли пользователь это мини-приложение в свою коллекцию.
</ResponseField>

<ResponseField name="clientFid" type="string">
Farcaster ID хост-клиента. Base App: "309857".
</ResponseField>
</Expandable>
</ResponseField>

<ResponseField name="location" type="string">
Откуда было запущено мини-приложение (например, "cast", "launcher", "notification").
</ResponseField>
</Expandable>
</ResponseField>

<ResponseField name="isFrameReady" type="boolean">
Сигнализировал ли фрейм о готовности хост-приложению.
</ResponseField>

<ResponseField name="setFrameReady" type="() => void">
Функция для сигнализации о готовности фрейма хост-приложению. Вызовите ее, когда ваше мини-приложение завершит загрузку.
</ResponseField>

<RequestExample>
```tsx app/App.tsx
'use client';

import { useMiniKit } from '@coinbase/onchainkit/minikit';
import { useEffect } from 'react';

export default function MyMiniApp() {
  const { context, isFrameReady, setFrameReady } = useMiniKit();

  useEffect(() => {
    if (!isFrameReady) {
      setFrameReady();
    }
  }, [setFrameReady, isFrameReady]);

  return (
    <div>
      <h1>Welcome, User {context.user.fid}!</h1>
      <p>Launched from: {context.location}</p>
      {context.client.added && (
        <p>✅ You've saved this app!</p>
      )}
    </div>
  );
}
```

```tsx components/ClientSpecificFeatures.tsx
import { useMiniKit } from '@coinbase/onchainkit/minikit';

export default function ClientSpecificFeatures() {
  const { context } = useMiniKit();
  
  const isBaseApp = context.client.clientFid === '309857';
  const isFarcaster = context.client.clientFid === '1';

  return (
    <div>
      {isBaseApp && (
        <div>Base App specific features</div>
      )}
      {isFarcaster && (
        <div>Farcaster specific features</div>
      )}
    </div>
  );
}
```

```tsx components/AnalyticsTracker.tsx
import { useMiniKit } from '@coinbase/onchainkit/minikit';
import { useEffect } from 'react';

export default function AnalyticsTracker() {
  const { context } = useMiniKit();

  useEffect(() => {
    // ✅ Безопасно: Используйте контекст для аналитики
    analytics.track('mini_app_opened', {
      userFid: context.user.fid,
      client: context.client.clientFid,
      launchLocation: context.location,
      hasAddedApp: context.client.added
    });
  }, [context]);

  return <div>App content...</div>;
}
```
</RequestExample>

## Примечания по использованию

### Готовность фрейма
Всегда вызывайте `setFrameReady()`, когда ваше мини-приложение завершит начальную загрузку:

```tsx components/FrameReady.tsx
useEffect(() => {
  if (!isFrameReady) {
    setFrameReady();
  }
}, [setFrameReady, isFrameReady]);
```

### Безопасность данных контекста

<Warning>
Данные контекста могут быть подделаны злоумышленниками. Никогда не используйте данные контекста для аутентификации или операций, критичных к безопасности. Используйте `useAuthenticate` для проверенной идентификации пользователя.
</Warning>

```tsx
// ❌ Не используйте для аутентификации
const isAuthenticated = !!context.user.fid; // Can be spoofed!

// ✅ Используйте только для аналитики и подсказок UX
const userHint = context.user.fid; // Для отслеживания аналитики
```

### Определение клиента
Используйте определение клиента для предоставления специфичных для платформы функций:

```tsx components/ClientDetection.tsx
const isBaseApp = context.client.clientFid === '309857';
const isFarcaster = context.client.clientFid === '1';

if (isBaseApp) {
  // Включите функции, специфичные для Base App
}
```

<Info>
Хук `useMiniKit` должен использоваться внутри компонента, обернутого в `MiniKitProvider`. Этот хук предоставляет основу для всей функциональности мини-приложения и должен быть одним из первых хуков, которые вы используете в своем приложении.
</Info>


