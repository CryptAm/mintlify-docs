---
title: useAuthenticate
description: Криптографическая аутентификация пользователей с помощью Sign In with Farcaster
---

Определен в [@coinbase/onchainkit](https://github.com/coinbase/onchainkit)

<Info>
Обеспечивает криптографически безопасную аутентификацию пользователей с использованием Sign In with Farcaster (SIWF). Возвращает проверенную личность пользователя и подпись для безопасных операций.
</Info>

## Возвращает

<ResponseField name="user" type="AuthenticatedUser | null">
Объект аутентифицированного пользователя с проверенной личностью или null, если не аутентифицирован.

<Expandable title="Свойства AuthenticatedUser">
<ResponseField name="fid" type="string">
Проверенный Farcaster ID аутентифицированного пользователя.
</ResponseField>

<ResponseField name="signature" type="string">
Криптографическая подпись, подтверждающая личность пользователя.
</ResponseField>

<ResponseField name="message" type="string">
Подписанное сообщение, использованное для аутентификации.
</ResponseField>
</Expandable>
</ResponseField>

<ResponseField name="authenticate" type="() => Promise<AuthenticatedUser | null>">
Функция для запуска процесса аутентификации. Возвращает проверенные данные пользователя при успехе.
</ResponseField>

<RequestExample>
```tsx components/AuthButton.tsx
import { useAuthenticate } from '@coinbase/onchainkit/minikit';
import { useState } from 'react';

export default function AuthButton() {
  const { user, authenticate } = useAuthenticate();
  const [isAuthenticating, setIsAuthenticating] = useState(false);

  const handleAuth = async () => {
    setIsAuthenticating(true);
    try {
      const authenticatedUser = await authenticate();
      if (authenticatedUser) {
        console.log('Authenticated user:', authenticatedUser.fid);
        // Сохраните в вашем бэкенде
        await saveUserSession(authenticatedUser);
      }
    } catch (error) {
      console.error('Authentication failed:', error);
    } finally {
      setIsAuthenticating(false);
    }
  };

  if (user) {
    return (
      <div>
        <p>✅ Authenticated as FID: {user.fid}</p>
        <button onClick={() => window.location.reload()}>
          Sign Out
        </button>
      </div>
    );
  }

  return (
    <button 
      onClick={handleAuth}
      disabled={isAuthenticating}
    >
      {isAuthenticating ? 'Authenticating...' : 'Sign In with Farcaster'}
    </button>
  );
}
```

```tsx components/ProtectedFeature.tsx  
import { useAuthenticate } from '@coinbase/onchainkit/minikit';

export default function ProtectedFeature() {
  const { user, authenticate } = useAuthenticate();

  if (!user) {
    return (
      <div className="auth-required">
        <h3>Authentication Required</h3>
        <p>Please sign in to access this feature</p>
        <button onClick={authenticate}>
          Sign In with Farcaster
        </button>
      </div>
    );
  }

  return (
    <div className="protected-content">
      <h3>Welcome, {user.fid}!</h3>
      <p>This is a protected feature only available to authenticated users.</p>
    </div>
  );
}
```
</RequestExample>


### Контекст vs Аутентификация
Используйте правильный инструмент для задачи:

```tsx components/SecurityExample.tsx
import { useAuthenticate, useMiniKit } from '@coinbase/onchainkit/minikit';

export default function SecurityExample() {
  const { user } = useAuthenticate(); // Для безопасности
  const { context } = useMiniKit();   // Для UX (пользовательского опыта)

  return (
    <div>
      {/* Безопасно: Персонализация UX с помощью контекста */}
      {context.user.fid && (
        <p>Hi there, user {context.user.fid}!</p>
      )}
      
      {/* Безопасно: Безопасность с аутентификацией */}
      {user && (
        <SecureUserDashboard verifiedFid={user.fid} />
      )}
    </div>
  );
}
```



<Info>
`useAuthenticate` предоставляет криптографическое подтверждение личности пользователя. Всегда проверяйте подписи на стороне сервера для операций, критичных к безопасности. Используйте контекст `useMiniKit` только для подсказок UX и аналитики.
</Info>


