---
title: Провайдер и инициализация
description: Настройка OnchainKitProvider и инициализация контекста фрейма
---

## Настройка OnchainKitProvider

OnchainKitProvider оборачивает ваше приложение и предоставляет контекст MiniKit всем дочерним компонентам. Он автоматически настраивает wagmi, react-query и коннектор Farcaster.

```tsx app/providers.tsx
import { OnchainKitProvider } from '@coinbase/onchainkit';
import { ReactNode } from 'react';
import { base } from 'wagmi/chains';

export function Providers({ children }: { children: ReactNode }) {
  return (
    <OnchainKitProvider
      apiKey={process.env.NEXT_PUBLIC_ONCHAINKIT_API_KEY}
      chain={base}
      config={{
        appearance: {
          mode: 'auto',
          theme: 'default',
          name: process.env.NEXT_PUBLIC_ONCHAINKIT_PROJECT_NAME,
          logo: process.env.NEXT_PUBLIC_ICON_URL,
        },
      }}
      miniKit={{
        enabled: true
      }}
    >
      {children}
    </OnchainKitProvider>
  );
}
```

<Tip>
Провайдер настраивает wagmi и react-query и использует коннектор Farcaster, когда он доступен.
</Tip>

## Конфигурация провайдера

### Обязательные свойства

| Свойство | Тип  | Описание    |
|----------|------|-------------|
| `apiKey` | string | Ваш API-ключ OnchainKit из Coinbase Developer Platform |
| `chain` | Chain | Блокчейн-сеть (обычно `base`) |

### Опциональная конфигурация

| Свойство | Тип | Описание |
|----------|------|-------------|
| `config.appearance.mode` | 'auto' \| 'light' \| 'dark' | Режим темы для UI компонентов |
| `config.appearance.theme` | string | Название темы для стилизации |
| `config.appearance.name` | string | Название приложения, отображаемое в UI |
| `config.appearance.logo` | string | URL логотипа для брендинга |

## Инициализация фрейма

Инициализируйте MiniKit в вашем основном компоненте, чтобы сигнализировать о готовности фрейма:

```tsx app/App.tsx
'use client';

import { useMiniKit } from '@coinbase/onchainkit/minikit';
import { useEffect } from 'react';

export default function App() {
  const { setFrameReady, isFrameReady } = useMiniKit();

  useEffect(() => {
    if (!isFrameReady) {
      setFrameReady();
    }
  }, [setFrameReady, isFrameReady]);

  return (
    <div>
      {/* Контент вашего приложения */}
    </div>
  );
}
```

## Хук useMiniKit

Хук `useMiniKit` предоставляет доступ к состоянию фрейма и контексту пользователя:

```tsx any-component.tsx
const { 
  setFrameReady, 
  isFrameReady, 
  context 
} = useMiniKit();
```

### Свойства контекста

| Свойство | Тип  | Описание    |
|----------|------|-------------|
| `context.user.fid` | string | Farcaster ID текущего пользователя |
| `context.client.added` | boolean | Сохранил ли пользователь мини-приложение |
| `context.location` | string | Откуда было запущено мини-приложение |

<Warning>
Данные контекста могут быть подделаны и не должны использоваться для аутентификации. Используйте `useAuthenticate` для безопасной проверки пользователя.
</Warning>


