---
title: fetchOnrampQuote
---

Утилита `fetchOnrampQuote` предоставляет расценку на основе актива, который пользователь хочет приобрести, а также сети, фиатного платежа, валюты оплаты, метода оплаты и страны. Это полезно для получения информации о ценах и комиссиях перед инициированием транзакции.

## Использование

<CodeGroup>
```tsx code
import { fetchOnrampQuote } from '@coinbase/onchainkit/fund';

const quote = await fetchOnrampQuote({
purchaseCurrency: 'ETH',
purchaseNetwork: 'ethereum',
paymentCurrency: 'USD',
paymentMethod: 'CARD',
paymentAmount: '100.00',
country: 'US',
subdivision: 'CA', // Обязательно для резидентов США
apiKey: 'your-api-key', // Обязателен при использовании без OnchainKitProvider или вне окружения React
});

````

```json return value
{
  "paymentTotal": {
    "value": "105.00",
    "currency": "USD"
  },
  "paymentSubtotal": {
    "value": "100.00",
    "currency": "USD"
  },
  "purchaseAmount": {
    "value": "0.05",
    "currency": "ETH"
  },
  "coinbaseFee": {
    "value": "3.00",
    "currency": "USD"
  },
  "networkFee": {
    "value": "2.00",
    "currency": "USD"
  },
  "quoteId": "quote_123"
}
````

</CodeGroup>

## Параметры

```typescript
{
  /**
   * ID криптоактива, который пользователь хочет приобрести.
   * Получается из API вариантов (options API).
   */
  purchaseCurrency: string;

  /**
   * Название сети, в которой должна быть куплена валюта для покупки.
   * Получается из API вариантов (options API). Если опущено, используется
   * сеть по умолчанию для криптовалюты.
   */
  purchaseNetwork?: string;

  /**
   * Фиатная валюта суммы платежа, например, USD.
   */
  paymentCurrency: string;

  /**
   * ID метода оплаты, используемого для завершения покупки.
   * Получается из API вариантов (options API).
   */
  paymentMethod: string;

  /**
   * Фиатная сумма, которую пользователь хочет потратить на покупку криптовалюты,
   * включая комиссии, с точностью до двух знаков после запятой, например, "100.00".
   */
  paymentAmount: string;

  /**
   * Двухбуквенный код страны по стандарту ISO 3166-1, представляющий
   * страну проживания пользователя, совершающего покупку, например, US.
   */
  country: string;

  /**
   * Двухбуквенный код субъекта страны по стандарту ISO 3166-2. Обязателен, если country="US",
   * поскольку в некоторых штатах (например, NY) действуют специфические ограничения на активы.
   */
  subdivision?: string;

   /**
   * Необязательный API-ключ для Coinbase Onramp. Если не предоставлен,
   * будет использован API-ключ из OnchainKitProvider. Обязателен при использовании
   * утилиты без OnchainKitProvider или вне окружения React.
   */
  apiKey?: string;
}
```

## Возвращает

`Promise<OnrampQuoteResponseData>` - Возвращает промис, который резолвится в данные расценки, содержащие суммы платежей, комиссии и ID расценки.

```typescript
type OnrampQuoteResponseData = {
  /**
   * Объект с суммой и валютой общего фиатного платежа, необходимого для завершения покупки, включая все комиссии.
   * Валюта будет соответствовать `paymentCurrency` из запроса, если она поддерживается, в противном случае используется USD.
   */
  paymentTotal: OnrampAmount;
  /**
   * Объект с суммой и валютой фиатной стоимости криптоактива, который будет приобретен, без учета комиссий.
   * Валюта будет соответствовать `paymentCurrency`.
   */
  paymentSubtotal: OnrampAmount;
  /**
   * Объект с суммой и валютой криптовалюты, которая будет приобретена.
   * Валюта будет соответствовать `purchaseCurrency` из запроса.
   * Количество знаков после запятой будет основано на криптоактиве.
   */
  purchaseAmount: OnrampAmount;
  /**
   * Объект с суммой и валютой комиссии, взимаемой биржей Coinbase для завершения транзакции.
   * Валюта будет соответствовать `paymentCurrency`.
   */
  coinbaseFee: OnrampAmount;
  /**
   * Объект с суммой и валютой сетевой комиссии, необходимой для отправки купленной криптовалюты на кошелек пользователя.
   * Валюта будет соответствовать `paymentCurrency`.
   */
  networkFee: OnrampAmount;
  /**
   * Референс расценки, который должен быть передан в параметры инициализации при запуске виджета Coinbase Onramp через SDK или генератор URL.
   */
  quoteId: string;
};

type OnrampAmount = {
  value: string;
  currency: string;
};
```
