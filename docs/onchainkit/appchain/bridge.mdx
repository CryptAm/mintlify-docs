---
title: <AppchainBridge /> · OnchainKit
sidebarTitle: <AppchainBridge />
description: Мост к аппчейнам с помощью OnchainKit
---

import { Danger } from "/snippets/danger.mdx";

<Danger>
**⚠️ ВНИМАНИЕ**

Компонент `AppchainBridge` находится в стадии альфа-релиза и предоставляется "КАК ЕСТЬ". Используйте на свой страх и риск.
</Danger>


Компонент `AppchainBridge` предоставляет простой интерфейс для реализации использования моста к аппчейнам с помощью OnchainKit.

## Предварительные требования

Перед использованием компонента `AppchainBridge` убедитесь, что вы выполнили шаги из [Начало работы](/onchainkit/getting-started).

### Запуск нового проекта

Если вы начинаете новый проект, мы рекомендуем использовать `create onchain` для создания каркаса проекта.

```bash
npm create onchain@latest
```

### Добавление к существующему проекту

Если вы добавляете `AppchainBridge` к существующему проекту, просто установите OnchainKit.

<CodeGroup>
```bash npm
npm install @coinbase/onchainkit
```

```bash yarn
yarn add @coinbase/onchainkit
```

```bash pnpm
pnpm add @coinbase/onchainkit
```

```bash bun
bun add @coinbase/onchainkit
```
</CodeGroup>

Оберните `<OnchainKitProvider />` вокруг вашего приложения, следуя шагам в [Начало работы](/onchainkit/installation/nextjs#add-providers).

## Быстрый старт

Чтобы использовать `AppchainBridge`, вам нужно создать пользовательскую цепь для вашей сети, используя [defineChain](https://viem.sh/docs/chains/introduction#custom-chains) от Viem..

Вы можете получить ID цепи и ваш RPC URL из дашборда вашего аппчейна в Coinbase Developer Platform.

После успешного создания добавьте пользовательскую цепь в конфигурацию Wagmi и предоставьте ее как дочерний компонент для `OnchainKitProvider`.

<CodeGroup>
```tsx chain.ts
// @noErrors: 2554
import { defineChain } from 'viem';

export const EXAMPLE_CHAIN = defineChain({
  id: 8453200000, // [!code ++]
  name: 'Your Appchain Network',
  nativeCurrency: {
    name: 'Ethereum',
    symbol: 'ETH',
    decimals: 18,
  },
  rpcUrls: {
    default: {
      http: ['https://your-rpc.appchain.base.org'], // [!code ++]
    },
  },
});
```

```tsx providers.tsx
// @noErrors: 2554
import { defineChain } from 'viem';

const EXAMPLE_CHAIN = defineChain({
  id: 8453200000,
  name: 'Your Appchain Network',
  nativeCurrency: {
    name: 'Ethereum',
    symbol: 'ETH',
    decimals: 18,
  },
  rpcUrls: {
    default: {
      http: ['https://your-rpc.appchain.base.org'],
    },
  },
});
// ---cut-before---
'use client';

import { baseSepolia } from 'wagmi/chains';
import { OnchainKitProvider } from '@coinbase/onchainkit';
import type { ReactNode } from 'react';
import { createConfig, http, WagmiProvider } from 'wagmi';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';

const wagmiConfig = createConfig({
  chains: [baseSepolia, EXAMPLE_CHAIN], // [!code ++]
  transports: {
    [baseSepolia.id]: http(),
    [EXAMPLE_CHAIN.id]: http(), // [!code ++]
  }
});

const queryClient = new QueryClient();

export function Providers(props: { children: ReactNode }) {
  return (
    <OnchainKitProvider
      apiKey={process.env.NEXT_PUBLIC_ONCHAINKIT_API_KEY}
          chain={baseSepolia}
          config={{ appearance: {
            mode: 'auto',
        }
      }}
    >
      <WagmiProvider config={wagmiConfig}>
        <QueryClientProvider client={queryClient}>
          {props.children}
        </QueryClientProvider>
      </WagmiProvider>
    </OnchainKitProvider>
  );
}
```
</CodeGroup>

Используйте пользовательскую цепь для создания объекта `Appchain`. Вы также можете отобразить иконку в UI, используя свойство `icon`.

```tsx
// @noErrors: 2554
import { defineChain } from 'viem';
const EXAMPLE_CHAIN = defineChain({
  id: 8453200000, // [!code ++]
  name: 'Your Appchain Network',
  nativeCurrency: {
    name: 'Ethereum',
    symbol: 'ETH',
    decimals: 18,
  },
  rpcUrls: {
    default: {
      http: ['https://your-rpc.appchain.base.org'], // [!code ++]
    },
  },
});
// ---cut-before---
import type { Appchain } from '@coinbase/onchainkit/appchain';

const EXAMPLE_APPCHAIN: Appchain = {
  chain: EXAMPLE_CHAIN,
<Frame>
  icon: <img src="https://some-icon.com/icon.png" alt="Your Appchain Network" />,
</Frame>
};
```

Теперь вы можете отрендерить компонент `AppchainBridge` со свойствами `chain` и `appchain`.

```tsx
// @noErrors: 2554
import { defineChain } from 'viem';
const EXAMPLE_CHAIN = defineChain({
  id: 8453200000, // [!code ++]
  name: 'Your Appchain Network',
  nativeCurrency: {
    name: 'Ethereum',
    symbol: 'ETH',
    decimals: 18,
  },
  rpcUrls: {
    default: {
      http: ['https://your-rpc.appchain.base.org'], // [!code ++]
    },
  },
});
import type { Appchain } from '@coinbase/onchainkit/appchain';

const EXAMPLE_APPCHAIN: Appchain = {
  chain: EXAMPLE_CHAIN,
<Frame>
  icon: <img src="https://some-icon.com/icon.png" alt="Your Appchain Network" />,
</Frame>
};
// ---cut-before---
import { AppchainBridge } from '@coinbase/onchainkit/appchain';
import { baseSepolia } from 'viem/chains';

<AppchainBridge chain={baseSepolia} appchain={EXAMPLE_APPCHAIN} />
```

## Настраиваемые токены для использования моста

По умолчанию единственным токеном для бриджинга является нативный ETH. Вы можете настроить токены для бриджинга, предоставив свойство `bridgeableTokens` компоненту `AppchainBridge`.

Давайте добавим пользовательский "Appchain Token" в массив токенов для моста.

```tsx
// @noErrors: 2554
import { defineChain } from 'viem';
const EXAMPLE_CHAIN = defineChain({
  id: 8453200000, // [!code ++]
  name: 'Your Appchain Network',
  nativeCurrency: {
    name: 'Ethereum',
    symbol: 'ETH',
    decimals: 18,
  },
  rpcUrls: {
    default: {
      http: ['https://your-rpc.appchain.base.org'], // [!code ++]
    },
  },
});
import type { Appchain } from '@coinbase/onchainkit/appchain';

const EXAMPLE_APPCHAIN: Appchain = {
  chain: EXAMPLE_CHAIN,
<Frame>
  icon: <img src="https://some-icon.com/icon.png" alt="Your Appchain Network" />,
</Frame>
};
// ---cut-before---
import type { BridgeableToken } from '@coinbase/onchainkit/appchain';

const customBridgeableTokens: BridgeableToken[] = [
  {
    name: 'ETH',
    address: '',
    symbol: 'ETH',
    decimals: 18,
    image:
    'https://wallet-api-production.s3.amazonaws.com/uploads/tokens/eth_288.png',
    chainId: 8453200000,
  },
  {
    address: '0x...',
    remoteToken: '0x...',
    name: 'Appchain Token',
    symbol: 'ATKN',
    decimals: 18,
    chainId: 8453200000,
    image: 'https://some-icon.com/icon.png',
  },
];
```

<Warning>
**⚠️ Что такое remoteToken?**

Поле `remoteToken` представляет адрес токена в аппчейне, к которому вы делаете перевод через мост.

ERC-20 токены в аппчейне должны соответствовать интерфейсу `IOptimismMintableERC20`, чтобы быть доступными для перевода.

Следуйте [документации Optimism](https://docs.optimism.io/app-developers/tutorials/bridging/standard-bridge-standard-token#create-an-l2-erc-20-token), чтобы получить адрес `remoteToken` для вашего ERC-20 токена.
</Warning>


Затем вы можете подключить `customBridgeableTokens` к компоненту `AppchainBridge` с помощью свойства `bridgeableTokens`.

```tsx
// @noErrors: 2554
// @noErrors: 2304
import type { BridgeableToken } from '@coinbase/onchainkit/appchain';

const customBridgeableTokens: BridgeableToken[] = [
  {
    name: 'ETH',
    address: '',
    symbol: 'ETH',
    decimals: 18,
    image:
    'https://wallet-api-production.s3.amazonaws.com/uploads/tokens/eth_288.png',
    chainId: 84532,
  },
  {
    address: '0x...',
    remoteToken: '0x...',
    name: 'Sandbox Token',
    symbol: 'SBOX',
    decimals: 18,
    chainId: 8453200058,
    image: 'https://img.cryptorank.io/coins/blocklords1670492311588.png',
  },
];
// ---cut-before---
import { AppchainBridge } from '@coinbase/onchainkit/appchain';
import { baseSepolia } from 'viem/chains';

<AppchainBridge
  chain={baseSepolia}
  appchain={SANDBOX_APPCHAIN}
  bridgeableTokens={customBridgeableTokens} // [!code ++]
/>
```

### Цепи с пользовательскими газовыми токенами

Для цепей, которые используют пользовательские газовые токены, просто установите поле `isCustomGasToken` в значение `true` для пользовательского газового токена в вашем списке токенов для перевода.

```tsx
// @noErrors: 2554
import type { BridgeableToken } from '@coinbase/onchainkit/appchain';

const customGasToken: BridgeableToken[] = [
  {
    address: '0x...',
    remoteToken: '0x...',
    name: 'Appchain Token',
    symbol: 'ATKN',
    decimals: 18,
    chainId: 8453200000,
    image: 'https://some-icon.com/icon.png',
    isCustomGasToken: true, // [!code ++]
  },
];
```

### Получение цены для пользовательских токенов

По умолчанию мы предоставляем ценовой фид для ETH и USDC.

Чтобы получать цену пользовательских ERC-20 токенов, вы можете переопределить функцию `handleFetchPrice` в компоненте `AppchainBridge`. Этот колбэк запускается каждый раз, когда пользователь меняет сумму ввода.

Функция должна соответствовать следующей сигнатуре:

```ts
(amount: string, token: Token) => Promise<string>;
```

```tsx
// @noErrors: 2554
// @noErrors: 2362 2363 2304
import { AppchainBridge } from '@coinbase/onchainkit/appchain';
import { baseSepolia } from 'viem/chains';

const handleFetchPrice = async (amount: string, token: Token) => {
  // Example of fetching price
  const price = await fetch(`https://api.example.com/price/${token.address}`);
  return price * amount;
};

<AppchainBridge
  chain={baseSepolia}
  appchain={EXAMPLE_APPCHAIN}
  bridgeableTokens={customBridgeableTokens}
  handleFetchPrice={handleFetchPrice} // [!code ++]
/>
```

## Компоненты

Компонент `AppchainBridge` включает следующие подкомпоненты:

- `<AppchainBridge />` - Полностью готовый компонент бриджа, который обрабатывает депозиты и выводы. Также включает свойство `children` для рендеринга пользовательских компонентов.
- `<AppchainBridgeProvider />` - Головной провайдер, который предоставляет контекст использования моста дочерним компонентам.
- `<AppchainBridgeInput />` - Компонент, который обрабатывает ввод суммы для перевода токенов.
- `<AppchainBridgeNetwork />` - Компонент, который отображает информацию о сети и позволяет выбирать сеть.
- `<AppchainBridgeTransactionButton />` - Компонент, который инициирует транзакции перевода через мост.
- `<AppchainBridgeWithdraw />` - Компонент, который обрабатывает интерфейс вывода.
- `<AppchainNetworkToggleButton />` - Кнопочный компонент для переключения между сетями.
- `<AppchainBridgeSuccess />` - Компонент, который отображает состояния успешных транзакций.
- `<AppchainBridgeResumeTransaction />` - Компонент, который обрабатывает возобновление прерванных транзакций моста.

## Свойства (Props)

- [`Appchain`](/onchainkit/appchain/types#appchain)
- [`AppchainBridgeReact`](/onchainkit/appchain/types#appchainbridgereact)
- [`AppchainBridgeProviderReact`](/onchainkit/appchain/types#appchainbridgeproviderreact)
- [`AppchainBridgeContextType`](/onchainkit/appchain/types#appchainbridgecontexttype)
- [`BridgeableToken`](/onchainkit/appchain/types#bridgeabletoken)
- [`ChainWithIcon`](/onchainkit/appchain/types#chainwithicon)
- [`AppchainConfig`](/onchainkit/appchain/types#appchainconfig)
- [`AppchainBridgeSuccessReact`](/onchainkit/appchain/types#appchainbridgesuccessreact)
- [`BridgeParams`](/onchainkit/appchain/types#bridgeparams)
- [`ChainConfigParams`](/onchainkit/appchain/types#chainconfigparams)
- [`UseDepositParams`](/onchainkit/appchain/types#usedepositparams)
- [`UseWithdrawParams`](/onchainkit/appchain/types#usewithdrawparams)
- [`UseDepositButtonParams`](/onchainkit/appchain/types#usedepositbuttonparams)
- [`UseWithdrawButtonParams`](/onchainkit/appchain/types#usewithdrawbuttonparams)

