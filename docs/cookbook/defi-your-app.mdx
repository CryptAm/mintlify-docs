---
title: Добавьте DeFi в ваше приложение
description: Добавьте распространенные финансовые функции, такие как обмен токенов и стратегии генерации дохода (yield), в ваше приложение с помощью готовых React компонентов из OnchainKit.
---

import { Danger } from "/snippets/danger.mdx";

Когда компании и частные лица совершают финансовые операции, это часто включает обмен активов и последующее размещение подходящих активов в стратегиях, генерирующих доход (yield). Это руководство покажет вам, как быстро добавить эти функции в ваше приложение с помощью готовых React компонентов из OnchainKit.

## Готовые к использованию компоненты
- [`<Swap />`](/onchainkit/swap/swap): Обменивайте активы прямо в вашем приложении.
- [`<Earn />`](/onchainkit/earn/earn): Генерируйте доход (yield) прямо в вашем приложении.
- [`<FundCard />`](/onchainkit/fund/fund-card): Пополняйте кошельки фиатом (через USDC, Apple Pay или банковскую карту), не покидая ваше приложение
- [`<Buy />`](/onchainkit/buy/buy): Покупайте токены прямо в вашем приложении.


Встраивая компоненты `Swap` и `Earn`, ваши пользователи не должны покидать ваше приложение для выполнения этих распространенных действий. Для пользователей, у которых нет средств в блокчейне, компоненты `Fund` и `Buy` предлагают интегрированный фиатный онрамп (fiat-to-crypto onramp).


## Интеграция компонента Swap

Компонент `Swap` позволяет пользователям обменивать один токен на другой прямо в вашем приложении. Он получает актуальные котировки, строит транзакции и выполняет обмены — абстрагируя лежащую в основе сложность.

Давайте добавим компонент `Swap` в ваше приложение.

<Steps>
  <Step title="Установите и настройте OnchainKit">
  Создайте новое OnchainKit приложение

  ```bash Terminal
  npm create onchain@latest
  ```
  </Step>
  <Step title="Импортируйте и отрендерите компонент Swap">
       ```typescript App.tsx
        import { SwapDefault } from '@coinbase/onchainkit/swap'; // [!code focus]
        import type { Token } from '@coinbase/onchainkit/token';

        const eth: Token = {
        name: 'ETH',
        address: '',
        symbol: 'ETH',
        decimals: 18,
        image:
            'https://wallet-api-production.s3.amazonaws.com/uploads/tokens/eth_288.png',
        chainId: 8453,
        };

        const usdc: Token = {
        name: 'USDC',
        address: '0x833589fcd6edb6e08f4c7c32d4f71b54bda02913',
        symbol: 'USDC',
        decimals: 6,
        image:
            'https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/44/2b/442b80bd16af0c0d9b22e03a16753823fe826e5bfd457292b55fa0ba8c1ba213-ZWUzYjJmZGUtMDYxNy00NDcyLTg0NjQtMWI4OGEwYjBiODE2',
        chainId: 8453,
        };

        <SwapDefault // [!code focus]
        from={[eth]} // [!code focus]
        to={[usdc]} // [!code focus]
        /> // [!code focus]
   ```
  </Step>
</Steps>

Теперь вы должны увидеть следующий компонент обмена в вашем приложении:

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=onchainkit-swap-wallet--not-connected&viewMode=story&dark=true&hero=true"
  width="100%"
  height="auto"
/>

{/* <App>
    <SwapWrapper>
        {({ address, swappableTokens }) => {
        if (address) {
            return (
            <SwapDefault from={swappableTokens} to={swappableTokens.slice().reverse()} disabled />
            )
        }
        return <>
            <Wallet>
            <ConnectWallet>
                <Avatar className="h-6 w-6" />
                <Name />
            </ConnectWallet>
            </Wallet>
        </>;
        }}
    </SwapWrapper>
</App> */}

Компонент Swap использует **Uniswap V3** в качестве маршрутизатора по умолчанию, но вы также можете использовать **0x Aggregator**, установив свойство `experimental.useAggregator` в `true`.



### Настройки Swap
Компонент Swap поставляется предварительно настроенным, но его можно значительно кастомизировать. Всего пара настроек, которые вы можете изменить:
- Параметры обмена
- Двусторонние или односторонние обмены
- Бесплатные (gasless) обмены с помощью paymaster

Чтобы узнать больше о том, как кастомизировать компонент Swap, ознакомьтесь с [документацией Swap](/onchainkit/swap/swap).


## Интеграция компонента Earn

Компонент `Earn` позволяет пользователям депонировать активы в сейфы (vaults), генерирующие доход (yield), и выводить их позже - всё внутри вашего приложения. Компонент `Earn` в настоящее время поддерживает сейфы Morpho на Base.

<Info>
**Получите адрес хранилища**

Вы можете получить адрес сейфа на странице [Vaults page](https://app.morpho.org/base/earn) Morpho. Вы будете использовать этот адрес при настройке компонента `Earn`.
</Info>


```tsx
// @noErrors: 2307
import { Earn } from '@coinbase/onchainkit/earn'; // [!code focus]

<Earn vaultAddress="0x7BfA7C4f149E7415b73bdeDfe609237e29CBF34A" /> // [!code focus]
```

Вот так просто вы добавили сейф, генерирующий доход (yield), в ваше приложение.

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=onchainkit-earn--main&viewMode=story&dark=true&hero=true"
  width="100%"
  height="400px"
/>

{/* <EarnMain /> */}

### Продвинутая кастомизация
Как и компонент Swap, компонент Earn можно значительно кастомизировать. Давайте настроим наш компонент, чтобы включить пользовательские кнопки для депозита, для оптимизированного пользовательского опыта.

- `useEarnContext` для доступа к значениям контекста компонента, `EarnDeposit` и `EarnDetails`
- `DepositButton` для рендеринга пользовательских кнопок депозита

<CodeGroup>
```tsx index.tsx
// @noErrors: 2307
import { Earn, useEarnContext } from '@coinbase/onchainkit/earn';
import { CustomDepositButtons } from '@/custom-deposit-buttons';

  <Earn vaultAddress="0x7BfA7C4f149E7415b73bdeDfe609237e29CBF34A">
      <CustomDepositButtons />
  </Earn>

```

```tsx custom-deposit-buttons.tsx
import {EarnDetails,
        EarnDeposit,
        useEarnContext,
        DepositButton} from '@coinbase/onchainkit/earn';

const predefinedAmounts = ['0.1', '1', '10'];

function CustomDepositButtons() {
  const { depositAmount, setDepositAmount } = useEarnContext();

  return (
    <EarnDeposit>
      <EarnDetails />
      <div className="grid grid-cols-3 gap-2">
        {predefinedAmounts.map((amount) => {
          const selected = amount === depositAmount;
          return (
            <button
              key={amount}
              type="button"
              onClick={() => setDepositAmount(amount)}
              className={`rounded-md px-4 py-2
              ${selected ? 'bg-[var(--ock-bg-primary)] text-[var(--ock-text-inverse)]'
              : 'bg-[var(--ock-bg-secondary)] text-[var(--ock-text-primary)]'}`}
            >
              {amount}
            </button>
          );
        })}
      </div>
      <DepositButton />
    </EarnDeposit>
  );
}
```
</CodeGroup>

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=onchainkit-earn--predefined-deposit&viewMode=story&dark=true&hero=true"
  width="100%"
  height="280px"
/>

{/* <PredefinedInputDeposit /> */}

## Онбординг пользователей в DeFi

Чтобы использовать компоненты `<FundCard/>` и `<Buy />`, пользователям необходимо иметь средства в кошельке. Если у пользователей нет средств, им потребуется фиатный онрамп или покупка токенов для совершения транзакций. Ниже мы рассмотрим два готовых решения от OnchainKit.

Компонент `Fund` (через `<FundCard />`) предлагает полный опыт фиатного онрампа, позволяя пользователям пополнять свои кошельки прямо в вашем приложении. Он предоставляет:
- Ввод суммы с переключением между фиатом и криптовалютой
- Выбор способа оплаты (Coinbase, Apple Pay, Банковская карта)
- Автоматические обновления обменных курсов
- Умную обработку ограничений способов оплаты (в зависимости от страны и региона)

<Tip>
Чтобы использовать компонент `FundCard`, вам нужно предоставить Client API Key в `OnchainKitProvider`. Вы можете получить его, следуя нашим шагам из ['Начало работы'](/onchainkit/installation/nextjs#get-your-client-api-key).
</Tip>


```tsx App.tsx
import { FundCard } from '@coinbase/onchainkit/fund';

<FundCard
  assetSymbol="ETH"
  country="US"
  currency="USD"
/>;
```

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=onchainkit-fund-card--default&viewMode=story&dark=true&hero=true"
  width="100%"
  height="370px"
/>

{/* <App>
  <FundWrapper>
    {({ address }) => {
      if (address) {
        return <FundCard assetSymbol="ETH" country="US" currency="USD" />;
      }
      return (
        <>
          <Wallet>
            <ConnectWallet>
              <Avatar className="h-6 w-6" />
              <Name />
            </ConnectWallet>
          </Wallet>
        </>
      );
    }}
  </FundWrapper>
</App> */}

Чтобы узнать больше о компоненте FundCard и его функциях, ознакомьтесь с [документацией FundCard](/onchainkit/fund/fund-card).

## Компонент `Buy`

Компоненты `Buy` предоставляют комплексный интерфейс для покупки пользователями [токенов](/onchainkit/token/types#token).

Компонент `Buy` поддерживает обмен токенов из USDC и ETH по умолчанию, с возможностью предоставить дополнительный токен по выбору, используя свойство `fromToken`. Пользователи могут покупать токены, используя свой аккаунт Coinbase, Apple Pay или банковскую карту.

<Note>
Этот компонент требует установки `projectId` в `OnchainKitProvider`. Вы можете найти ваш `projectId` на [Coinbase Developer Platform](https://portal.cdp.coinbase.com/products/onchainkit).
</Note>


```tsx
import { Buy } from '@coinbase/onchainkit/buy'; // [!code focus]
import type { Token } from '@coinbase/onchainkit/token';

export default function BuyComponents() { // [!code focus]
  const degenToken: Token = {
    name: 'DEGEN',
    address: '0x4ed4e862860bed51a9570b96d89af5e1b0efefed',
    symbol: 'DEGEN',
    decimals: 18,
    image:
    'https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/3b/bf/3bbf118b5e6dc2f9e7fc607a6e7526647b4ba8f0bea87125f971446d57b296d2-MDNmNjY0MmEtNGFiZi00N2I0LWIwMTItMDUyMzg2ZDZhMWNm',
    chainId: 8453,
  };

  return ( // [!code focus]
    <Buy toToken={degenToken} /> // [!code focus]
  ) // [!code focus]
} // [!code focus]

```

<iframe
  src="https://684b5e62b1ff46bc5bf83966-aijszlfakk.chromatic.com/iframe.html?args=&id=onchainkit-buy--disabled&viewMode=story&dark=true&hero=true"
  width="100%"
  height="auto"
/>

{/* <App>
  <BuyWrapper>
    {({ address, toToken }) => {
      return (
        <Buy toToken={toToken} disabled />
      )
    }}
  </BuyWrapper>
</App> */}

<Danger>
**Примечание: Этот интерфейс предназначен только для демонстрационных целей.**

Потоки Swap и Onramp будут выполняться и работать из коробки, когда вы реализуете компонент в вашем собственном приложении.
</Danger>


Комбинируя Swap, Earn, Fund и Buy с этими дополнительными инструментами, вы можете быстро построить надежный DeFi опыт внутри приложения с минимальными затратами на разработку. Это позволяет вам сосредоточиться на построении вашего уникального ценностного предложения.


## Следующие шаги 

Если вы используете эти компоненты, вам, вероятно, будут полезны следующие компоненты:

- [`<Transaction/>`](/onchainkit/transaction/transaction): Предоставляет высокоуровневый интерфейс для транзакций для выполнения пользовательских ончейн транзакций.


- [`<TokenChip/>`](/onchainkit/token/token-chip): Предоставляет утилиты для выбора и отображения токенов, идеально подходит для создания интерфейсов, подобных кошелькам.


- [`<WalletIsland/>`](/onchainkit/wallet/wallet-island): Продвинутый, перемещаемый виджет кошелька, который объединяет управление кошельком (QR код, опции покупки, обмен, вид портфеля) в одном интерфейсе.


### Используйте бесплатные транзакции (Go Gasless)
Для компонентов `<Buy />` и `<Swap/>`, вы можете включить бесплатные транзакции (gasless), установив свойство [`isSponsored`](/onchainkit/buy/buy#sponsor-gas-with-paymaster) в `true`.
