---
title: Создание приложения
description: Руководство по созданию next.js приложения на Base с использованием OnchainKit
---

Добро пожаловать в руководство по быстрому старту Base! В этом пошаговом руководстве мы создадим простое ончейн-приложение от начала до конца. Независимо от того, являетесь ли вы опытным разработчиком или только начинаете, это руководство поможет вам.

## Что вы достигнете

К концу этого быстрого старта вы создадите ончейн-приложение путем:

- Настройки вашей среды разработки
- Развертывания ваших смарт-контрактов на Base
- Взаимодействия с вашими развернутыми контрактами из фронтенда

Наше простое приложение будет ончейн-приложением для подсчета, которое позволяет вам добавлять к общему счету, хранящемуся в ончейне, нажатием кнопки.

<Tip>

**Почему Base?**

Base - это быстрый, недорогой и удобный для разработчиков Ethereum L2, созданный для привлечения следующего миллиарда пользователей в ончейн. Следуя этому руководству, вы присоединитесь к активной экосистеме разработчиков, создателей и новаторов, которые строят глобальную ончейн-экономику.
</Tip>


## Настройка среды разработки

<Steps>
  <Step title="Bootstrap with OnchainKit">
  OnchainKit - это библиотека готовых к использованию React компонентов и Typescript утилит для создания ончейн-приложений. Выполните следующую команду в вашем терминале и следуйте подсказкам для начальной настройки вашего проекта.

  ```bash Terminal
  npm create onchain@latest
  ```

  Подсказки запросят у вас CDP API Key, который вы можете получить [здесь](https://portal.cdp.coinbase.com/projects/api-keys/client-key).

  После прохождения подсказок у вас будет новая директория проекта с базовым приложением OnchainKit. Выполните следующее, чтобы увидеть его вживую.

  ```bash Terminal
  cd my-onchainkit-app
  npm install
  npm run dev
  ```

  Вы увидите следующий экран.

<Frame>
  <img alt="OnchainKit Template" src="/images/onchainkit/quickstart.png" height="364" />
</Frame>

После развертывания наших контрактов мы добавим кнопку, которая позволит нам взаимодействовать с нашими контрактами.

  </Step>
  <Step title="Install and initialize Foundry">
  Общий счет будет храниться в ончейне в смарт-контракте. Мы будем использовать фреймворк Foundry для развертывания нашего контракта в тестовой сети Base Sepolia.

  1. Создайте папку 'contracts' в корне проекта

  ```bash Terminal
  mkdir contracts && cd contracts
  ```

  2. Установите и инициализируйте Foundry

  ```bash Terminal
  curl -L https://foundry.paradigm.xyz | bash
  foundryup
  forge init --no-git
  ```

  Откройте проект и найдите файл контракта 'Counter.sol' в папке /contracts/src. Здесь находится простая логика нашего приложения для подсчета.

  <Tip>
  **--no-git**

  Поскольку contracts - это папка в нашем проекте, мы не хотим инициализировать отдельный git репозиторий для нее, поэтому добавляем флаг --no-git.
  </Tip>
  </Step>
  <Step title="Configure Foundry with Base">
  Для развертывания ваших смарт-контрактов на Base вам нужны два ключевых компонента:

  1. Подключение к ноде для взаимодействия с сетью Base
  2. Приватный ключ с средствами для развертывания контракта

  Давайте настроим оба этих компонента:

  - Создайте файл '.env' в вашей директории contracts и добавьте Base и Base Sepolia RPC URLs

  ```bash contracts/.env
  BASE_RPC_URL="https://mainnet.base.org"
  BASE_SEPOLIA_RPC_URL="https://sepolia.base.org"
  ```

  - Загрузите ваши переменные окружения

  ```bash Terminal
  source .env
  ```

  <Tip>
  **Base Sepolia**

  Base Sepolia - это тестовая сеть для Base, которую мы будем использовать в оставшейся части этого руководства. Вы можете получить бесплатный Base Sepolia ETH из одного из [кранов, перечисленных здесь](/base-chain/tools/network-faucets).
  </Tip>
  </Step>
  <Step title="Secure your private key">
  Для развертывания контракта требуется приватный ключ с тестовыми средствами. Вы можете сгенерировать свежий приватный ключ [здесь](https://visualkey.link/).

  1. Сохраните ваш приватный ключ в безопасном хранилище ключей Foundry

  ```bash Terminal
  cast wallet import deployer --interactive
  ```

  2. Когда появится запрос, введите ваш приватный ключ и пароль.

  Ваш приватный ключ хранится в '~/.foundry/keystores', который не отслеживается git.

  <Warning>
  Никогда не делитесь и не коммитьте ваш приватный ключ. Всегда храните его в безопасности и обращайтесь с осторожностью.
  </Warning>
  </Step>
</Steps>

## Развертывание ваших контрактов

Теперь, когда ваша среда настроена, давайте развернем ваши контракты на Base Sepolia. Проект Foundry предоставляет скрипт развертывания, который развернет контракт 'Counter.sol'.

<Steps>
  <Step title="Run the deploy script">
  1. Используйте следующую команду для компиляции и развертывания вашего контракта

  ```bash Terminal
  forge create ./src/Counter.sol:Counter --rpc-url $BASE_SEPOLIA_RPC_URL --account deployer
  ```

  Обратите внимание, что формат развертываемого контракта `<contract-path>:<contract-name>`.
  </Step>
  <Step title="Save the contract address">
  После успешного развертывания хэш транзакции будет выведен в консоль

  Скопируйте адрес развернутого контракта и добавьте его в ваш файл '.env'

  ```bash
  COUNTER_CONTRACT_ADDRESS="0x..."
  ```

  </Step>
  <Step title="Load the new environment variable">
  ```bash Terminal
  source .env
  ```
  </Step>
  <Step title="Verify Your Deployment">
  Чтобы убедиться, что ваш контракт успешно развернут:

  1. Проверьте транзакцию на [Sepolia Basescan](https://sepolia.basescan.org/).
  2. Используйте команду 'cast' для взаимодействия с вашим развернутым контрактом из командной строки

  ```bash
  cast call $COUNTER_CONTRACT_ADDRESS "number()(uint256)" --rpc-url $BASE_SEPOLIA_RPC_URL
  ```

  Это вернет начальное значение переменной хранения 'number' контракта Counter, которое будет '0'.
  </Step>
</Steps>

**Поздравляем! Вы развернули ваш смарт-контракт на Base Sepolia!**

Теперь давайте подключим фронтенд для взаимодействия с вашим недавно развернутым контрактом.

## Взаимодействие с вашим контрактом

Для взаимодействия с логикой смарт-контракта нам нужно отправить ончейн-транзакцию. Мы можем легко сделать это с помощью компонента `Transaction`. Это упрощенная версия компонента `Transaction`, предназначенная для оптимизации процесса интеграции. Вместо ручного определения каждого подкомпонента и пропса, мы можем использовать эту сокращенную версию, которая отображает нашу рекомендуемую реализацию компонента и включает компоненты `TransactionButton` и `TransactionToast`.

<Steps>
  <Step title="Add the Transaction component">
  Давайте добавим компонент `Transaction` в наш файл `page.tsx`. Удалите существующий контент в теге `main` и замените его следующим сниппетом.

  ```tsx page.tsx
  // @noErrors: 2307 - Cannot find module '@/calls'
  import { Transaction } from '@coinbase/onchainkit/transaction';
  import { calls } from '@/calls';

  <main className="flex flex-grow items-center justify-center">
    <div className="w-full max-w-4xl p-4">
      <div className="mx-auto mb-6 w-1/3">
        <Transaction calls={calls} />
      </div>
    </div>
  </main>;
  ```
  </Step>
  <Step title="Defining the contract calls">
  В предыдущем сниппете кода вы увидели, что мы импортировали `calls` из файла `calls.ts`. Этот файл предоставляет детали, необходимые для взаимодействия с нашим контрактом и вызова функции `increment`. Создайте новый файл `calls.ts` в той же папке, что и ваш файл `page.tsx`, и добавьте следующий код.

  ```ts calls.ts
  const counterContractAddress = '0x...'; // add your contract address here
  const counterContractAbi = [
    {
      type: 'function',
      name: 'increment',
      inputs: [],
      outputs: [],
      stateMutability: 'nonpayable',
    },
  ] as const;

  export const calls = [
    {
      address: counterContractAddress,
      abi: counterContractAbi,
      functionName: 'increment',
      args: [],
    },
  ];
  ```

  <Tip>

  **Contract Address**

  Файл calls.ts содержит детали взаимодействия с контрактом, включая адрес контракта, который мы сохранили на предыдущем шаге.
  </Tip>
  </Step>
  <Step title="Testing the component">
  Теперь, когда вы подключите кошелек и нажмете на кнопку 'Transact' и одобрите транзакцию, она увеличит счет в ончейне на единицу.

  Мы можем проверить, что ончейн-подсчет произошел, снова используя 'cast' для вызова функции 'number' на нашем контракте.

  ```bash Terminal
  cast call $COUNTER_CONTRACT_ADDRESS "number()(uint256)" --rpc-url $BASE_SEPOLIA_RPC_URL
  ```

  Если транзакция была успешной, счет должен был увеличиться на единицу!
  </Step>
</Steps>

Теперь у нас есть рабочее ончейн-приложение для подсчета! Хотя пример простой, он иллюстрирует сквозной процесс создания ончейн-приложения. Мы:

- Настроили проект с фронтендом и ончейн-инфраструктурой
- Развернули смарт-контракт на Base Sepolia
- Взаимодействовали с контрактом из фронтенда

## Дальнейшие улучшения

Это только начало. Существует много способов, как мы можем улучшить это приложение. Например, мы могли бы:

- Сделать транзакцию `increment` бесплатной (gasless) путем интеграции с [Paymaster](/onchainkit/transaction/transaction#sponsor-with-paymaster-capabilities)
- Улучшить подключение кошелька и процесс регистрации с помощью компонента [WalletModal](/onchainkit/wallet/wallet-modal)
- Добавить ончейн [Identity](/onchainkit/identity/identity) чтобы мы знали, кто добавил последний подсчет
